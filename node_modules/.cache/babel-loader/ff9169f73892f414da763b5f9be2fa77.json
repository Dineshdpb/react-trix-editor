{"ast":null,"code":"!function (e, t) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = t() : \"function\" == typeof define && define.amd ? define(t) : (e = e || self).Tribute = t();\n}(this, function () {\n  \"use strict\";\n\n  function e(e, t) {\n    if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n  }\n\n  function t(e, t) {\n    for (var n = 0; n < t.length; n++) {\n      var i = t[n];\n      i.enumerable = i.enumerable || !1, i.configurable = !0, \"value\" in i && (i.writable = !0), Object.defineProperty(e, i.key, i);\n    }\n  }\n\n  function n(e, n, i) {\n    return n && t(e.prototype, n), i && t(e, i), e;\n  }\n\n  function i(e, t) {\n    return function (e) {\n      if (Array.isArray(e)) return e;\n    }(e) || function (e, t) {\n      if (!(Symbol.iterator in Object(e) || \"[object Arguments]\" === Object.prototype.toString.call(e))) return;\n      var n = [],\n          i = !0,\n          r = !1,\n          o = void 0;\n\n      try {\n        for (var u, l = e[Symbol.iterator](); !(i = (u = l.next()).done) && (n.push(u.value), !t || n.length !== t); i = !0) {\n          ;\n        }\n      } catch (e) {\n        r = !0, o = e;\n      } finally {\n        try {\n          i || null == l.return || l.return();\n        } finally {\n          if (r) throw o;\n        }\n      }\n\n      return n;\n    }(e, t) || function () {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }();\n  }\n\n  if (Array.prototype.find || (Array.prototype.find = function (e) {\n    if (null === this) throw new TypeError(\"Array.prototype.find called on null or undefined\");\n    if (\"function\" != typeof e) throw new TypeError(\"predicate must be a function\");\n\n    for (var t, n = Object(this), i = n.length >>> 0, r = arguments[1], o = 0; o < i; o++) {\n      if (t = n[o], e.call(r, t, o, n)) return t;\n    }\n  }), window && \"function\" != typeof window.CustomEvent) {\n    var r = function r(e, t) {\n      t = t || {\n        bubbles: !1,\n        cancelable: !1,\n        detail: void 0\n      };\n      var n = document.createEvent(\"CustomEvent\");\n      return n.initCustomEvent(e, t.bubbles, t.cancelable, t.detail), n;\n    };\n\n    void 0 !== window.Event && (r.prototype = window.Event.prototype), window.CustomEvent = r;\n  }\n\n  var o = function () {\n    function t(n) {\n      e(this, t), this.tribute = n, this.tribute.events = this;\n    }\n\n    return n(t, [{\n      key: \"bind\",\n      value: function value(e) {\n        e.boundKeydown = this.keydown.bind(e, this), e.boundKeyup = this.keyup.bind(e, this), e.boundInput = this.input.bind(e, this), e.addEventListener(\"keydown\", e.boundKeydown, !1), e.addEventListener(\"keyup\", e.boundKeyup, !1), e.addEventListener(\"input\", e.boundInput, !1);\n      }\n    }, {\n      key: \"unbind\",\n      value: function value(e) {\n        e.removeEventListener(\"keydown\", e.boundKeydown, !1), e.removeEventListener(\"keyup\", e.boundKeyup, !1), e.removeEventListener(\"input\", e.boundInput, !1), delete e.boundKeydown, delete e.boundKeyup, delete e.boundInput;\n      }\n    }, {\n      key: \"keydown\",\n      value: function value(e, n) {\n        e.shouldDeactivate(n) && (e.tribute.isActive = !1, e.tribute.hideMenu());\n        var i = this;\n        e.commandEvent = !1, t.keys().forEach(function (t) {\n          t.key === n.keyCode && (e.commandEvent = !0, e.callbacks()[t.value.toLowerCase()](n, i));\n        });\n      }\n    }, {\n      key: \"input\",\n      value: function value(e, t) {\n        e.inputEvent = !0, e.keyup.call(this, e, t);\n      }\n    }, {\n      key: \"click\",\n      value: function value(e, t) {\n        var n = e.tribute;\n\n        if (n.menu && n.menu.contains(t.target)) {\n          var i = t.target;\n\n          for (t.preventDefault(), t.stopPropagation(); \"li\" !== i.nodeName.toLowerCase();) {\n            if (!(i = i.parentNode) || i === n.menu) throw new Error(\"cannot find the <li> container for the click\");\n          }\n\n          n.selectItemAtIndex(i.getAttribute(\"data-index\"), t), n.hideMenu();\n        } else n.current.element && !n.current.externalTrigger && (n.current.externalTrigger = !1, setTimeout(function () {\n          return n.hideMenu();\n        }));\n      }\n    }, {\n      key: \"keyup\",\n      value: function value(e, t) {\n        if (e.inputEvent && (e.inputEvent = !1), e.updateSelection(this), 27 !== t.keyCode) {\n          if (!e.tribute.allowSpaces && e.tribute.hasTrailingSpace) return e.tribute.hasTrailingSpace = !1, e.commandEvent = !0, void e.callbacks().space(t, this);\n          if (!e.tribute.isActive) if (e.tribute.autocompleteMode) e.callbacks().triggerChar(t, this, \"\");else {\n            var n = e.getKeyCode(e, this, t);\n            if (isNaN(n) || !n) return;\n            var i = e.tribute.triggers().find(function (e) {\n              return e.charCodeAt(0) === n;\n            });\n            void 0 !== i && e.callbacks().triggerChar(t, this, i);\n          }\n          e.tribute.current.mentionText.length < e.tribute.current.collection.menuShowMinLength || ((e.tribute.current.trigger || e.tribute.autocompleteMode) && !1 === e.commandEvent || e.tribute.isActive && 8 === t.keyCode) && e.tribute.showMenuFor(this, !0);\n        }\n      }\n    }, {\n      key: \"shouldDeactivate\",\n      value: function value(e) {\n        if (!this.tribute.isActive) return !1;\n\n        if (0 === this.tribute.current.mentionText.length) {\n          var n = !1;\n          return t.keys().forEach(function (t) {\n            e.keyCode === t.key && (n = !0);\n          }), !n;\n        }\n\n        return !1;\n      }\n    }, {\n      key: \"getKeyCode\",\n      value: function value(e, t, n) {\n        var i = e.tribute,\n            r = i.range.getTriggerInfo(!1, i.hasTrailingSpace, !0, i.allowSpaces, i.autocompleteMode);\n        return !!r && r.mentionTriggerChar.charCodeAt(0);\n      }\n    }, {\n      key: \"updateSelection\",\n      value: function value(e) {\n        this.tribute.current.element = e;\n        var t = this.tribute.range.getTriggerInfo(!1, this.tribute.hasTrailingSpace, !0, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n        t && (this.tribute.current.selectedPath = t.mentionSelectedPath, this.tribute.current.mentionText = t.mentionText, this.tribute.current.selectedOffset = t.mentionSelectedOffset);\n      }\n    }, {\n      key: \"callbacks\",\n      value: function value() {\n        var e = this;\n        return {\n          triggerChar: function triggerChar(t, n, i) {\n            var r = e.tribute;\n            r.current.trigger = i;\n            var o = r.collection.find(function (e) {\n              return e.trigger === i;\n            });\n            r.current.collection = o, r.current.mentionText.length >= r.current.collection.menuShowMinLength && r.inputEvent && r.showMenuFor(n, !0);\n          },\n          enter: function enter(t, n) {\n            e.tribute.isActive && e.tribute.current.filteredItems && (t.preventDefault(), t.stopPropagation(), setTimeout(function () {\n              e.tribute.selectItemAtIndex(e.tribute.menuSelected, t), e.tribute.hideMenu();\n            }, 0));\n          },\n          escape: function escape(t, n) {\n            e.tribute.isActive && (t.preventDefault(), t.stopPropagation(), e.tribute.isActive = !1, e.tribute.hideMenu());\n          },\n          tab: function tab(t, n) {\n            e.callbacks().enter(t, n);\n          },\n          space: function space(t, n) {\n            e.tribute.isActive && (e.tribute.spaceSelectsMatch ? e.callbacks().enter(t, n) : e.tribute.allowSpaces || (t.stopPropagation(), setTimeout(function () {\n              e.tribute.hideMenu(), e.tribute.isActive = !1;\n            }, 0)));\n          },\n          up: function up(t, n) {\n            if (e.tribute.isActive && e.tribute.current.filteredItems) {\n              t.preventDefault(), t.stopPropagation();\n              var i = e.tribute.current.filteredItems.length,\n                  r = e.tribute.menuSelected;\n              i > r && r > 0 ? (e.tribute.menuSelected--, e.setActiveLi()) : 0 === r && (e.tribute.menuSelected = i - 1, e.setActiveLi(), e.tribute.menu.scrollTop = e.tribute.menu.scrollHeight);\n            }\n          },\n          down: function down(t, n) {\n            if (e.tribute.isActive && e.tribute.current.filteredItems) {\n              t.preventDefault(), t.stopPropagation();\n              var i = e.tribute.current.filteredItems.length - 1,\n                  r = e.tribute.menuSelected;\n              i > r ? (e.tribute.menuSelected++, e.setActiveLi()) : i === r && (e.tribute.menuSelected = 0, e.setActiveLi(), e.tribute.menu.scrollTop = 0);\n            }\n          },\n          delete: function _delete(t, n) {\n            e.tribute.isActive && e.tribute.current.mentionText.length < 1 ? e.tribute.hideMenu() : e.tribute.isActive && e.tribute.showMenuFor(n);\n          }\n        };\n      }\n    }, {\n      key: \"setActiveLi\",\n      value: function value(e) {\n        var t = this.tribute.menu.querySelectorAll(\"li\"),\n            n = t.length >>> 0;\n        e && (this.tribute.menuSelected = parseInt(e));\n\n        for (var i = 0; i < n; i++) {\n          var r = t[i];\n\n          if (i === this.tribute.menuSelected) {\n            r.classList.add(this.tribute.current.collection.selectClass);\n            var o = r.getBoundingClientRect(),\n                u = this.tribute.menu.getBoundingClientRect();\n\n            if (o.bottom > u.bottom) {\n              var l = o.bottom - u.bottom;\n              this.tribute.menu.scrollTop += l;\n            } else if (o.top < u.top) {\n              var s = u.top - o.top;\n              this.tribute.menu.scrollTop -= s;\n            }\n          } else r.classList.remove(this.tribute.current.collection.selectClass);\n        }\n      }\n    }, {\n      key: \"getFullHeight\",\n      value: function value(e, t) {\n        var n = e.getBoundingClientRect().height;\n\n        if (t) {\n          var i = e.currentStyle || window.getComputedStyle(e);\n          return n + parseFloat(i.marginTop) + parseFloat(i.marginBottom);\n        }\n\n        return n;\n      }\n    }], [{\n      key: \"keys\",\n      value: function value() {\n        return [{\n          key: 9,\n          value: \"TAB\"\n        }, {\n          key: 8,\n          value: \"DELETE\"\n        }, {\n          key: 13,\n          value: \"ENTER\"\n        }, {\n          key: 27,\n          value: \"ESCAPE\"\n        }, {\n          key: 32,\n          value: \"SPACE\"\n        }, {\n          key: 38,\n          value: \"UP\"\n        }, {\n          key: 40,\n          value: \"DOWN\"\n        }];\n      }\n    }]), t;\n  }(),\n      u = function () {\n    function t(n) {\n      e(this, t), this.tribute = n, this.tribute.menuEvents = this, this.menu = this.tribute.menu;\n    }\n\n    return n(t, [{\n      key: \"bind\",\n      value: function value(e) {\n        var t = this;\n        this.menuClickEvent = this.tribute.events.click.bind(null, this), this.menuContainerScrollEvent = this.debounce(function () {\n          t.tribute.isActive && t.tribute.showMenuFor(t.tribute.current.element, !1);\n        }, 300, !1), this.windowResizeEvent = this.debounce(function () {\n          t.tribute.isActive && t.tribute.range.positionMenuAtCaret(!0);\n        }, 300, !1), this.tribute.range.getDocument().addEventListener(\"MSPointerDown\", this.menuClickEvent, !1), this.tribute.range.getDocument().addEventListener(\"mousedown\", this.menuClickEvent, !1), window.addEventListener(\"resize\", this.windowResizeEvent), this.menuContainer ? this.menuContainer.addEventListener(\"scroll\", this.menuContainerScrollEvent, !1) : window.addEventListener(\"scroll\", this.menuContainerScrollEvent);\n      }\n    }, {\n      key: \"unbind\",\n      value: function value(e) {\n        this.tribute.range.getDocument().removeEventListener(\"mousedown\", this.menuClickEvent, !1), this.tribute.range.getDocument().removeEventListener(\"MSPointerDown\", this.menuClickEvent, !1), window.removeEventListener(\"resize\", this.windowResizeEvent), this.menuContainer ? this.menuContainer.removeEventListener(\"scroll\", this.menuContainerScrollEvent, !1) : window.removeEventListener(\"scroll\", this.menuContainerScrollEvent);\n      }\n    }, {\n      key: \"debounce\",\n      value: function value(e, t, n) {\n        var i,\n            r = arguments,\n            o = this;\n        return function () {\n          var u = o,\n              l = r,\n              s = n && !i;\n          clearTimeout(i), i = setTimeout(function () {\n            i = null, n || e.apply(u, l);\n          }, t), s && e.apply(u, l);\n        };\n      }\n    }]), t;\n  }(),\n      l = function () {\n    function t(n) {\n      e(this, t), this.tribute = n, this.tribute.range = this;\n    }\n\n    return n(t, [{\n      key: \"getDocument\",\n      value: function value() {\n        var e;\n        return this.tribute.current.collection && (e = this.tribute.current.collection.iframe), e ? e.contentWindow.document : document;\n      }\n    }, {\n      key: \"positionMenuAtCaret\",\n      value: function value(e) {\n        var t,\n            n = this,\n            i = this.tribute.current,\n            r = this.getTriggerInfo(!1, this.tribute.hasTrailingSpace, !0, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n\n        if (void 0 !== r) {\n          if (!this.tribute.positionMenu) return void (this.tribute.menu.style.cssText = \"display: block;\");\n          t = this.isContentEditable(i.element) ? this.getContentEditableCaretPosition(r.mentionPosition) : this.getTextAreaOrInputUnderlinePosition(this.tribute.current.element, r.mentionPosition), this.tribute.menu.style.cssText = \"top: \".concat(t.top, \"px;\\n                                     left: \").concat(t.left, \"px;\\n                                     right: \").concat(t.right, \"px;\\n                                     bottom: \").concat(t.bottom, \"px;\\n                                     position: absolute;\\n                                     display: block;\"), \"auto\" === t.left && (this.tribute.menu.style.left = \"auto\"), \"auto\" === t.top && (this.tribute.menu.style.top = \"auto\"), e && this.scrollIntoView(), window.setTimeout(function () {\n            var i = {\n              width: n.tribute.menu.offsetWidth,\n              height: n.tribute.menu.offsetHeight\n            },\n                r = n.isMenuOffScreen(t, i),\n                o = window.innerWidth > i.width && (r.left || r.right),\n                u = window.innerHeight > i.height && (r.top || r.bottom);\n            (o || u) && (n.tribute.menu.style.cssText = \"display: none\", n.positionMenuAtCaret(e));\n          }, 0);\n        } else this.tribute.menu.style.cssText = \"display: none\";\n      }\n    }, {\n      key: \"selectElement\",\n      value: function value(e, t, n) {\n        var i,\n            r = e;\n        if (t) for (var o = 0; o < t.length; o++) {\n          if (void 0 === (r = r.childNodes[t[o]])) return;\n\n          for (; r.length < n;) {\n            n -= r.length, r = r.nextSibling;\n          }\n\n          0 !== r.childNodes.length || r.length || (r = r.previousSibling);\n        }\n        var u = this.getWindowSelection();\n        (i = this.getDocument().createRange()).setStart(r, n), i.setEnd(r, n), i.collapse(!0);\n\n        try {\n          u.removeAllRanges();\n        } catch (e) {}\n\n        u.addRange(i), e.focus();\n      }\n    }, {\n      key: \"replaceTriggerText\",\n      value: function value(e, t, n, i, r) {\n        var o = this.getTriggerInfo(!0, n, t, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n\n        if (void 0 !== o) {\n          var u = this.tribute.current,\n              l = new CustomEvent(\"tribute-replaced\", {\n            detail: {\n              item: r,\n              instance: u,\n              context: o,\n              event: i\n            }\n          });\n\n          if (this.isContentEditable(u.element)) {\n            e += \"string\" == typeof this.tribute.replaceTextSuffix ? this.tribute.replaceTextSuffix : \" \";\n            var s = o.mentionPosition + o.mentionText.length;\n            this.tribute.autocompleteMode || (s += o.mentionTriggerChar.length), this.pasteHtml(e, o.mentionPosition, s);\n          } else {\n            var a = this.tribute.current.element,\n                c = \"string\" == typeof this.tribute.replaceTextSuffix ? this.tribute.replaceTextSuffix : \" \";\n            e += c;\n            var h = o.mentionPosition,\n                d = o.mentionPosition + o.mentionText.length + c.length;\n            this.tribute.autocompleteMode || (d += o.mentionTriggerChar.length - 1), a.value = a.value.substring(0, h) + e + a.value.substring(d, a.value.length), a.selectionStart = h + e.length, a.selectionEnd = h + e.length;\n          }\n\n          u.element.dispatchEvent(new CustomEvent(\"input\", {\n            bubbles: !0\n          })), u.element.dispatchEvent(l);\n        }\n      }\n    }, {\n      key: \"pasteHtml\",\n      value: function value(e, t, n) {\n        var i, r;\n        r = this.getWindowSelection(), (i = this.getDocument().createRange()).setStart(r.anchorNode, t), i.setEnd(r.anchorNode, n), i.deleteContents();\n        var o = this.getDocument().createElement(\"div\");\n        o.innerHTML = e;\n\n        for (var u, l, s = this.getDocument().createDocumentFragment(); u = o.firstChild;) {\n          l = s.appendChild(u);\n        }\n\n        i.insertNode(s), l && ((i = i.cloneRange()).setStartAfter(l), i.collapse(!0), r.removeAllRanges(), r.addRange(i));\n      }\n    }, {\n      key: \"getWindowSelection\",\n      value: function value() {\n        return this.tribute.collection.iframe ? this.tribute.collection.iframe.contentWindow.getSelection() : window.getSelection();\n      }\n    }, {\n      key: \"getNodePositionInParent\",\n      value: function value(e) {\n        if (null === e.parentNode) return 0;\n\n        for (var t = 0; t < e.parentNode.childNodes.length; t++) {\n          if (e.parentNode.childNodes[t] === e) return t;\n        }\n      }\n    }, {\n      key: \"getContentEditableSelectedPath\",\n      value: function value(e) {\n        var t = this.getWindowSelection(),\n            n = t.anchorNode,\n            i = [];\n\n        if (null != n) {\n          for (var r, o = n.contentEditable; null !== n && \"true\" !== o;) {\n            r = this.getNodePositionInParent(n), i.push(r), null !== (n = n.parentNode) && (o = n.contentEditable);\n          }\n\n          return i.reverse(), {\n            selected: n,\n            path: i,\n            offset: t.getRangeAt(0).startOffset\n          };\n        }\n      }\n    }, {\n      key: \"getTextPrecedingCurrentSelection\",\n      value: function value() {\n        var e = this.tribute.current,\n            t = \"\";\n\n        if (this.isContentEditable(e.element)) {\n          var n = this.getWindowSelection().anchorNode;\n\n          if (null != n) {\n            var i = n.textContent,\n                r = this.getWindowSelection().getRangeAt(0).startOffset;\n            i && r >= 0 && (t = i.substring(0, r));\n          }\n        } else {\n          var o = this.tribute.current.element;\n\n          if (o) {\n            var u = o.selectionStart;\n            o.value && u >= 0 && (t = o.value.substring(0, u));\n          }\n        }\n\n        return t;\n      }\n    }, {\n      key: \"getLastWordInText\",\n      value: function value(e) {\n        var t = (e = e.replace(/\\u00A0/g, \" \")).split(/\\s+/);\n        return t[t.length - 1].trim();\n      }\n    }, {\n      key: \"getTriggerInfo\",\n      value: function value(e, t, n, i, r) {\n        var o,\n            u,\n            l,\n            s = this,\n            a = this.tribute.current;\n\n        if (this.isContentEditable(a.element)) {\n          var c = this.getContentEditableSelectedPath(a);\n          c && (o = c.selected, u = c.path, l = c.offset);\n        } else o = this.tribute.current.element;\n\n        var h = this.getTextPrecedingCurrentSelection(),\n            d = this.getLastWordInText(h);\n        if (r) return {\n          mentionPosition: h.length - d.length,\n          mentionText: d,\n          mentionSelectedElement: o,\n          mentionSelectedPath: u,\n          mentionSelectedOffset: l\n        };\n\n        if (null != h) {\n          var f,\n              m = -1;\n\n          if (this.tribute.collection.forEach(function (e) {\n            var t = e.trigger,\n                i = e.requireLeadingSpace ? s.lastIndexWithLeadingSpace(h, t) : h.lastIndexOf(t);\n            i > m && (m = i, f = t, n = e.requireLeadingSpace);\n          }), m >= 0 && (0 === m || !n || /[\\xA0\\s]/g.test(h.substring(m - 1, m)))) {\n            var p = h.substring(m + f.length, h.length);\n            f = h.substring(m, m + f.length);\n            var v = p.substring(0, 1),\n                g = p.length > 0 && (\" \" === v || \" \" === v);\n            t && (p = p.trim());\n            var b = i ? /[^\\S ]/g : /[\\xA0\\s]/g;\n            if (this.tribute.hasTrailingSpace = b.test(p), !g && (e || !b.test(p))) return {\n              mentionPosition: m,\n              mentionText: p,\n              mentionSelectedElement: o,\n              mentionSelectedPath: u,\n              mentionSelectedOffset: l,\n              mentionTriggerChar: f\n            };\n          }\n        }\n      }\n    }, {\n      key: \"lastIndexWithLeadingSpace\",\n      value: function value(e, t) {\n        for (var n = e.split(\"\").reverse().join(\"\"), i = -1, r = 0, o = e.length; r < o; r++) {\n          for (var u = r === e.length - 1, l = /\\s/.test(n[r + 1]), s = !0, a = t.length - 1; a >= 0; a--) {\n            if (t[a] !== n[r - a]) {\n              s = !1;\n              break;\n            }\n          }\n\n          if (s && (u || l)) {\n            i = e.length - 1 - r;\n            break;\n          }\n        }\n\n        return i;\n      }\n    }, {\n      key: \"isContentEditable\",\n      value: function value(e) {\n        return \"INPUT\" !== e.nodeName && \"TEXTAREA\" !== e.nodeName;\n      }\n    }, {\n      key: \"isMenuOffScreen\",\n      value: function value(e, t) {\n        var n = window.innerWidth,\n            i = window.innerHeight,\n            r = document.documentElement,\n            o = (window.pageXOffset || r.scrollLeft) - (r.clientLeft || 0),\n            u = (window.pageYOffset || r.scrollTop) - (r.clientTop || 0),\n            l = \"number\" == typeof e.top ? e.top : u + i - e.bottom - t.height,\n            s = \"number\" == typeof e.right ? e.right : e.left + t.width,\n            a = \"number\" == typeof e.bottom ? e.bottom : e.top + t.height,\n            c = \"number\" == typeof e.left ? e.left : o + n - e.right - t.width;\n        return {\n          top: l < Math.floor(u),\n          right: s > Math.ceil(o + n),\n          bottom: a > Math.ceil(u + i),\n          left: c < Math.floor(o)\n        };\n      }\n    }, {\n      key: \"getMenuDimensions\",\n      value: function value() {\n        var e = {\n          width: null,\n          height: null\n        };\n        return this.tribute.menu.style.cssText = \"top: 0px;\\n                                 left: 0px;\\n                                 position: fixed;\\n                                 display: block;\\n                                 visibility; hidden;\", e.width = this.tribute.menu.offsetWidth, e.height = this.tribute.menu.offsetHeight, this.tribute.menu.style.cssText = \"display: none;\", e;\n      }\n    }, {\n      key: \"getTextAreaOrInputUnderlinePosition\",\n      value: function value(e, t, n) {\n        var i = null !== window.mozInnerScreenX,\n            r = this.getDocument().createElement(\"div\");\n        r.id = \"input-textarea-caret-position-mirror-div\", this.getDocument().body.appendChild(r);\n        var o = r.style,\n            u = window.getComputedStyle ? getComputedStyle(e) : e.currentStyle;\n        o.whiteSpace = \"pre-wrap\", \"INPUT\" !== e.nodeName && (o.wordWrap = \"break-word\"), o.position = \"absolute\", o.visibility = \"hidden\", [\"direction\", \"boxSizing\", \"width\", \"height\", \"overflowX\", \"overflowY\", \"borderTopWidth\", \"borderRightWidth\", \"borderBottomWidth\", \"borderLeftWidth\", \"paddingTop\", \"paddingRight\", \"paddingBottom\", \"paddingLeft\", \"fontStyle\", \"fontVariant\", \"fontWeight\", \"fontStretch\", \"fontSize\", \"fontSizeAdjust\", \"lineHeight\", \"fontFamily\", \"textAlign\", \"textTransform\", \"textIndent\", \"textDecoration\", \"letterSpacing\", \"wordSpacing\"].forEach(function (e) {\n          o[e] = u[e];\n        }), i ? (o.width = \"\".concat(parseInt(u.width) - 2, \"px\"), e.scrollHeight > parseInt(u.height) && (o.overflowY = \"scroll\")) : o.overflow = \"hidden\", r.textContent = e.value.substring(0, t), \"INPUT\" === e.nodeName && (r.textContent = r.textContent.replace(/\\s/g, \" \"));\n        var l = this.getDocument().createElement(\"span\");\n        l.textContent = e.value.substring(t) || \".\", r.appendChild(l);\n        var s = e.getBoundingClientRect(),\n            a = document.documentElement,\n            c = (window.pageXOffset || a.scrollLeft) - (a.clientLeft || 0),\n            h = (window.pageYOffset || a.scrollTop) - (a.clientTop || 0),\n            d = 0,\n            f = 0;\n        this.menuContainerIsBody && (d = s.top, f = s.left);\n        var m = {\n          top: d + h + l.offsetTop + parseInt(u.borderTopWidth) + parseInt(u.fontSize) - e.scrollTop,\n          left: f + c + l.offsetLeft + parseInt(u.borderLeftWidth)\n        },\n            p = window.innerWidth,\n            v = window.innerHeight,\n            g = this.getMenuDimensions(),\n            b = this.isMenuOffScreen(m, g);\n        b.right && (m.right = p - m.left, m.left = \"auto\");\n        var y = this.tribute.menuContainer ? this.tribute.menuContainer.offsetHeight : this.getDocument().body.offsetHeight;\n\n        if (b.bottom) {\n          var w = y - (v - (this.tribute.menuContainer ? this.tribute.menuContainer.getBoundingClientRect() : this.getDocument().body.getBoundingClientRect()).top);\n          m.bottom = w + (v - s.top - l.offsetTop), m.top = \"auto\";\n        }\n\n        return (b = this.isMenuOffScreen(m, g)).left && (m.left = p > g.width ? c + p - g.width : c, delete m.right), b.top && (m.top = v > g.height ? h + v - g.height : h, delete m.bottom), this.getDocument().body.removeChild(r), m;\n      }\n    }, {\n      key: \"getContentEditableCaretPosition\",\n      value: function value(e) {\n        var t,\n            n = this.getWindowSelection();\n        (t = this.getDocument().createRange()).setStart(n.anchorNode, e), t.setEnd(n.anchorNode, e), t.collapse(!1);\n        var i = t.getBoundingClientRect(),\n            r = document.documentElement,\n            o = (window.pageXOffset || r.scrollLeft) - (r.clientLeft || 0),\n            u = (window.pageYOffset || r.scrollTop) - (r.clientTop || 0),\n            l = {\n          left: i.left + o,\n          top: i.top + i.height + u\n        },\n            s = window.innerWidth,\n            a = window.innerHeight,\n            c = this.getMenuDimensions(),\n            h = this.isMenuOffScreen(l, c);\n        h.right && (l.left = \"auto\", l.right = s - i.left - o);\n        var d = this.tribute.menuContainer ? this.tribute.menuContainer.offsetHeight : this.getDocument().body.offsetHeight;\n\n        if (h.bottom) {\n          var f = d - (a - (this.tribute.menuContainer ? this.tribute.menuContainer.getBoundingClientRect() : this.getDocument().body.getBoundingClientRect()).top);\n          l.top = \"auto\", l.bottom = f + (a - i.top);\n        }\n\n        return (h = this.isMenuOffScreen(l, c)).left && (l.left = s > c.width ? o + s - c.width : o, delete l.right), h.top && (l.top = a > c.height ? u + a - c.height : u, delete l.bottom), this.menuContainerIsBody || (l.left = l.left ? l.left - this.tribute.menuContainer.offsetLeft : l.left, l.top = l.top ? l.top - this.tribute.menuContainer.offsetTop : l.top), l;\n      }\n    }, {\n      key: \"scrollIntoView\",\n      value: function value(e) {\n        var t,\n            n = this.menu;\n\n        if (void 0 !== n) {\n          for (; void 0 === t || 0 === t.height;) {\n            if (0 === (t = n.getBoundingClientRect()).height && (void 0 === (n = n.childNodes[0]) || !n.getBoundingClientRect)) return;\n          }\n\n          var i = t.top,\n              r = i + t.height;\n          if (i < 0) window.scrollTo(0, window.pageYOffset + t.top - 20);else if (r > window.innerHeight) {\n            var o = window.pageYOffset + t.top - 20;\n            o - window.pageYOffset > 100 && (o = window.pageYOffset + 100);\n            var u = window.pageYOffset - (window.innerHeight - r);\n            u > o && (u = o), window.scrollTo(0, u);\n          }\n        }\n      }\n    }, {\n      key: \"menuContainerIsBody\",\n      get: function get() {\n        return this.tribute.menuContainer === document.body || !this.tribute.menuContainer;\n      }\n    }]), t;\n  }(),\n      s = function () {\n    function t(n) {\n      e(this, t), this.tribute = n, this.tribute.search = this;\n    }\n\n    return n(t, [{\n      key: \"simpleFilter\",\n      value: function value(e, t) {\n        var n = this;\n        return t.filter(function (t) {\n          return n.test(e, t);\n        });\n      }\n    }, {\n      key: \"test\",\n      value: function value(e, t) {\n        return null !== this.match(e, t);\n      }\n    }, {\n      key: \"match\",\n      value: function value(e, t, n) {\n        n = n || {};\n        t.length;\n        var i = n.pre || \"\",\n            r = n.post || \"\",\n            o = n.caseSensitive && t || t.toLowerCase();\n        if (n.skip) return {\n          rendered: t,\n          score: 0\n        };\n        e = n.caseSensitive && e || e.toLowerCase();\n        var u = this.traverse(o, e, 0, 0, []);\n        return u ? {\n          rendered: this.render(t, u.cache, i, r),\n          score: u.score\n        } : null;\n      }\n    }, {\n      key: \"traverse\",\n      value: function value(e, t, n, i, r) {\n        if (t.length === i) return {\n          score: this.calculateScore(r),\n          cache: r.slice()\n        };\n\n        if (!(e.length === n || t.length - i > e.length - n)) {\n          for (var o, u, l = t[i], s = e.indexOf(l, n); s > -1;) {\n            if (r.push(s), u = this.traverse(e, t, s + 1, i + 1, r), r.pop(), !u) return o;\n            (!o || o.score < u.score) && (o = u), s = e.indexOf(l, s + 1);\n          }\n\n          return o;\n        }\n      }\n    }, {\n      key: \"calculateScore\",\n      value: function value(e) {\n        var t = 0,\n            n = 1;\n        return e.forEach(function (i, r) {\n          r > 0 && (e[r - 1] + 1 === i ? n += n + 1 : n = 1), t += n;\n        }), t;\n      }\n    }, {\n      key: \"render\",\n      value: function value(e, t, n, i) {\n        var r = e.substring(0, t[0]);\n        return t.forEach(function (o, u) {\n          r += n + e[o] + i + e.substring(o + 1, t[u + 1] ? t[u + 1] : e.length);\n        }), r;\n      }\n    }, {\n      key: \"filter\",\n      value: function value(e, t, n) {\n        var i = this;\n        return n = n || {}, t.reduce(function (t, r, o, u) {\n          var l = r;\n          n.extract && ((l = n.extract(r)) || (l = \"\"));\n          var s = i.match(e, l, n);\n          return null != s && (t[t.length] = {\n            string: s.rendered,\n            score: s.score,\n            index: o,\n            original: r\n          }), t;\n        }, []).sort(function (e, t) {\n          var n = t.score - e.score;\n          return n || e.index - t.index;\n        });\n      }\n    }]), t;\n  }();\n\n  return function () {\n    function t(n) {\n      var i,\n          r = this,\n          a = n.values,\n          c = void 0 === a ? null : a,\n          h = n.iframe,\n          d = void 0 === h ? null : h,\n          f = n.selectClass,\n          m = void 0 === f ? \"highlight\" : f,\n          p = n.containerClass,\n          v = void 0 === p ? \"tribute-container\" : p,\n          g = n.itemClass,\n          b = void 0 === g ? \"\" : g,\n          y = n.trigger,\n          w = void 0 === y ? \"@\" : y,\n          T = n.autocompleteMode,\n          C = void 0 !== T && T,\n          S = n.selectTemplate,\n          E = void 0 === S ? null : S,\n          k = n.menuItemTemplate,\n          x = void 0 === k ? null : k,\n          M = n.lookup,\n          A = void 0 === M ? \"key\" : M,\n          L = n.fillAttr,\n          I = void 0 === L ? \"value\" : L,\n          N = n.collection,\n          O = void 0 === N ? null : N,\n          D = n.menuContainer,\n          P = void 0 === D ? null : D,\n          R = n.noMatchTemplate,\n          W = void 0 === R ? null : R,\n          H = n.requireLeadingSpace,\n          B = void 0 === H || H,\n          F = n.allowSpaces,\n          _ = void 0 !== F && F,\n          j = n.replaceTextSuffix,\n          Y = void 0 === j ? null : j,\n          z = n.positionMenu,\n          K = void 0 === z || z,\n          q = n.spaceSelectsMatch,\n          U = void 0 !== q && q,\n          X = n.searchOpts,\n          Q = void 0 === X ? {} : X,\n          V = n.menuItemLimit,\n          G = void 0 === V ? null : V,\n          J = n.menuShowMinLength,\n          Z = void 0 === J ? 0 : J;\n\n      if (e(this, t), this.autocompleteMode = C, this.menuSelected = 0, this.current = {}, this.inputEvent = !1, this.isActive = !1, this.menuContainer = P, this.allowSpaces = _, this.replaceTextSuffix = Y, this.positionMenu = K, this.hasTrailingSpace = !1, this.spaceSelectsMatch = U, this.autocompleteMode && (w = \"\", _ = !1), c) this.collection = [{\n        trigger: w,\n        iframe: d,\n        selectClass: m,\n        containerClass: v,\n        itemClass: b,\n        selectTemplate: (E || t.defaultSelectTemplate).bind(this),\n        menuItemTemplate: (x || t.defaultMenuItemTemplate).bind(this),\n        noMatchTemplate: (i = W, \"string\" == typeof i ? \"\" === i.trim() ? null : i : \"function\" == typeof i ? i.bind(r) : W || function () {\n          return \"<li>No Match Found!</li>\";\n        }.bind(r)),\n        lookup: A,\n        fillAttr: I,\n        values: c,\n        requireLeadingSpace: B,\n        searchOpts: Q,\n        menuItemLimit: G,\n        menuShowMinLength: Z\n      }];else {\n        if (!O) throw new Error(\"[Tribute] No collection specified.\");\n        this.autocompleteMode && console.warn(\"Tribute in autocomplete mode does not work for collections\"), this.collection = O.map(function (e) {\n          return {\n            trigger: e.trigger || w,\n            iframe: e.iframe || d,\n            selectClass: e.selectClass || m,\n            containerClass: e.containerClass || v,\n            itemClass: e.itemClass || b,\n            selectTemplate: (e.selectTemplate || t.defaultSelectTemplate).bind(r),\n            menuItemTemplate: (e.menuItemTemplate || t.defaultMenuItemTemplate).bind(r),\n            noMatchTemplate: function (e) {\n              return \"string\" == typeof e ? \"\" === e.trim() ? null : e : \"function\" == typeof e ? e.bind(r) : W || function () {\n                return \"<li>No Match Found!</li>\";\n              }.bind(r);\n            }(W),\n            lookup: e.lookup || A,\n            fillAttr: e.fillAttr || I,\n            values: e.values,\n            requireLeadingSpace: e.requireLeadingSpace,\n            searchOpts: e.searchOpts || Q,\n            menuItemLimit: e.menuItemLimit || G,\n            menuShowMinLength: e.menuShowMinLength || Z\n          };\n        });\n      }\n      new l(this), new o(this), new u(this), new s(this);\n    }\n\n    return n(t, [{\n      key: \"triggers\",\n      value: function value() {\n        return this.collection.map(function (e) {\n          return e.trigger;\n        });\n      }\n    }, {\n      key: \"attach\",\n      value: function value(e) {\n        if (!e) throw new Error(\"[Tribute] Must pass in a DOM node or NodeList.\");\n        if (\"undefined\" != typeof jQuery && e instanceof jQuery && (e = e.get()), e.constructor === NodeList || e.constructor === HTMLCollection || e.constructor === Array) for (var t = e.length, n = 0; n < t; ++n) {\n          this._attach(e[n]);\n        } else this._attach(e);\n      }\n    }, {\n      key: \"_attach\",\n      value: function value(e) {\n        e.hasAttribute(\"data-tribute\") && console.warn(\"Tribute was already bound to \" + e.nodeName), this.ensureEditable(e), this.events.bind(e), e.setAttribute(\"data-tribute\", !0);\n      }\n    }, {\n      key: \"ensureEditable\",\n      value: function value(e) {\n        if (-1 === t.inputTypes().indexOf(e.nodeName)) {\n          if (!e.contentEditable) throw new Error(\"[Tribute] Cannot bind to \" + e.nodeName);\n          e.contentEditable = !0;\n        }\n      }\n    }, {\n      key: \"createMenu\",\n      value: function value(e) {\n        var t = this.range.getDocument().createElement(\"div\"),\n            n = this.range.getDocument().createElement(\"ul\");\n        return t.className = e, t.appendChild(n), this.menuContainer ? this.menuContainer.appendChild(t) : this.range.getDocument().body.appendChild(t);\n      }\n    }, {\n      key: \"showMenuFor\",\n      value: function value(e, t) {\n        var n = this;\n\n        if (!this.isActive || this.current.element !== e || this.current.mentionText !== this.currentMentionTextSnapshot) {\n          this.currentMentionTextSnapshot = this.current.mentionText, this.menu || (this.menu = this.createMenu(this.current.collection.containerClass), e.tributeMenu = this.menu, this.menuEvents.bind(this.menu)), this.isActive = !0, this.menuSelected = 0, this.current.mentionText || (this.current.mentionText = \"\");\n\n          var r = function r(e) {\n            if (n.isActive) {\n              var r = n.search.filter(n.current.mentionText, e, {\n                pre: n.current.collection.searchOpts.pre || \"<span>\",\n                post: n.current.collection.searchOpts.post || \"</span>\",\n                skip: n.current.collection.searchOpts.skip,\n                extract: function extract(e) {\n                  if (\"string\" == typeof n.current.collection.lookup) return e[n.current.collection.lookup];\n                  if (\"function\" == typeof n.current.collection.lookup) return n.current.collection.lookup(e, n.current.mentionText);\n                  throw new Error(\"Invalid lookup attribute, lookup must be string or function.\");\n                }\n              });\n              n.current.collection.menuItemLimit && (r = r.slice(0, n.current.collection.menuItemLimit)), n.current.filteredItems = r;\n              var o = n.menu.querySelector(\"ul\");\n\n              if (n.range.positionMenuAtCaret(t), !r.length) {\n                var u = new CustomEvent(\"tribute-no-match\", {\n                  detail: n.menu\n                });\n                return n.current.element.dispatchEvent(u), void (\"function\" == typeof n.current.collection.noMatchTemplate && !n.current.collection.noMatchTemplate() || !n.current.collection.noMatchTemplate ? n.hideMenu() : \"function\" == typeof n.current.collection.noMatchTemplate ? o.innerHTML = n.current.collection.noMatchTemplate() : o.innerHTML = n.current.collection.noMatchTemplate);\n              }\n\n              o.innerHTML = \"\";\n              var l = n.range.getDocument().createDocumentFragment();\n              r.forEach(function (e, t) {\n                var r = n.range.getDocument().createElement(\"li\");\n                r.setAttribute(\"data-index\", t), r.className = n.current.collection.itemClass, r.addEventListener(\"mousemove\", function (e) {\n                  var t = i(n._findLiTarget(e.target), 2),\n                      r = (t[0], t[1]);\n                  0 !== e.movementY && n.events.setActiveLi(r);\n                }), n.menuSelected === t && r.classList.add(n.current.collection.selectClass), r.innerHTML = n.current.collection.menuItemTemplate(e), l.appendChild(r);\n              }), o.appendChild(l);\n            }\n          };\n\n          \"function\" == typeof this.current.collection.values ? this.current.collection.values(this.current.mentionText, r) : r(this.current.collection.values);\n        }\n      }\n    }, {\n      key: \"_findLiTarget\",\n      value: function value(e) {\n        if (!e) return [];\n        var t = e.getAttribute(\"data-index\");\n        return t ? [e, t] : this._findLiTarget(e.parentNode);\n      }\n    }, {\n      key: \"showMenuForCollection\",\n      value: function value(e, t) {\n        e !== document.activeElement && this.placeCaretAtEnd(e), this.current.collection = this.collection[t || 0], this.current.externalTrigger = !0, this.current.element = e, e.isContentEditable ? this.insertTextAtCursor(this.current.collection.trigger) : this.insertAtCaret(e, this.current.collection.trigger), this.showMenuFor(e);\n      }\n    }, {\n      key: \"placeCaretAtEnd\",\n      value: function value(e) {\n        if (e.focus(), void 0 !== window.getSelection && void 0 !== document.createRange) {\n          var t = document.createRange();\n          t.selectNodeContents(e), t.collapse(!1);\n          var n = window.getSelection();\n          n.removeAllRanges(), n.addRange(t);\n        } else if (void 0 !== document.body.createTextRange) {\n          var i = document.body.createTextRange();\n          i.moveToElementText(e), i.collapse(!1), i.select();\n        }\n      }\n    }, {\n      key: \"insertTextAtCursor\",\n      value: function value(e) {\n        var t, n;\n        (n = (t = window.getSelection()).getRangeAt(0)).deleteContents();\n        var i = document.createTextNode(e);\n        n.insertNode(i), n.selectNodeContents(i), n.collapse(!1), t.removeAllRanges(), t.addRange(n);\n      }\n    }, {\n      key: \"insertAtCaret\",\n      value: function value(e, t) {\n        var n = e.scrollTop,\n            i = e.selectionStart,\n            r = e.value.substring(0, i),\n            o = e.value.substring(e.selectionEnd, e.value.length);\n        e.value = r + t + o, i += t.length, e.selectionStart = i, e.selectionEnd = i, e.focus(), e.scrollTop = n;\n      }\n    }, {\n      key: \"hideMenu\",\n      value: function value() {\n        this.menu && (this.menu.style.cssText = \"display: none;\", this.isActive = !1, this.menuSelected = 0, this.current = {});\n      }\n    }, {\n      key: \"selectItemAtIndex\",\n      value: function value(e, t) {\n        if (\"number\" == typeof (e = parseInt(e)) && !isNaN(e)) {\n          var n = this.current.filteredItems[e],\n              i = this.current.collection.selectTemplate(n);\n          null !== i && this.replaceText(i, t, n);\n        }\n      }\n    }, {\n      key: \"replaceText\",\n      value: function value(e, t, n) {\n        this.range.replaceTriggerText(e, !0, !0, t, n);\n      }\n    }, {\n      key: \"_append\",\n      value: function value(e, t, n) {\n        if (\"function\" == typeof e.values) throw new Error(\"Unable to append to values, as it is a function.\");\n        e.values = n ? t : e.values.concat(t);\n      }\n    }, {\n      key: \"append\",\n      value: function value(e, t, n) {\n        var i = parseInt(e);\n        if (\"number\" != typeof i) throw new Error(\"please provide an index for the collection to update.\");\n        var r = this.collection[i];\n\n        this._append(r, t, n);\n      }\n    }, {\n      key: \"appendCurrent\",\n      value: function value(e, t) {\n        if (!this.isActive) throw new Error(\"No active state. Please use append instead and pass an index.\");\n\n        this._append(this.current.collection, e, t);\n      }\n    }, {\n      key: \"detach\",\n      value: function value(e) {\n        if (!e) throw new Error(\"[Tribute] Must pass in a DOM node or NodeList.\");\n        if (\"undefined\" != typeof jQuery && e instanceof jQuery && (e = e.get()), e.constructor === NodeList || e.constructor === HTMLCollection || e.constructor === Array) for (var t = e.length, n = 0; n < t; ++n) {\n          this._detach(e[n]);\n        } else this._detach(e);\n      }\n    }, {\n      key: \"_detach\",\n      value: function value(e) {\n        var t = this;\n        this.events.unbind(e), e.tributeMenu && this.menuEvents.unbind(e.tributeMenu), setTimeout(function () {\n          e.removeAttribute(\"data-tribute\"), t.isActive = !1, e.tributeMenu && e.tributeMenu.remove();\n        });\n      }\n    }, {\n      key: \"isActive\",\n      get: function get() {\n        return this._isActive;\n      },\n      set: function set(e) {\n        if (this._isActive != e && (this._isActive = e, this.current.element)) {\n          var t = new CustomEvent(\"tribute-active-\".concat(e));\n          this.current.element.dispatchEvent(t);\n        }\n      }\n    }], [{\n      key: \"defaultSelectTemplate\",\n      value: function value(e) {\n        return void 0 === e ? \"\".concat(this.current.collection.trigger).concat(this.current.mentionText) : this.range.isContentEditable(this.current.element) ? '<span class=\"tribute-mention\">' + (this.current.collection.trigger + e.original[this.current.collection.fillAttr]) + \"</span>\" : this.current.collection.trigger + e.original[this.current.collection.fillAttr];\n      }\n    }, {\n      key: \"defaultMenuItemTemplate\",\n      value: function value(e) {\n        return e.string;\n      }\n    }, {\n      key: \"inputTypes\",\n      value: function value() {\n        return [\"TEXTAREA\", \"INPUT\"];\n      }\n    }]), t;\n  }();\n});","map":{"version":3,"sources":["../src/utils.js","../src/TributeEvents.js","../src/TributeMenuEvents.js","../src/TributeRange.js","../src/TributeSearch.js","../src/Tribute.js"],"names":["Array","prototype","find","predicate","this","TypeError","list","Object","length","thisArg","arguments","value","i","call","window","CustomEvent","event","params","bubbles","cancelable","detail","undefined","evt","document","createEvent","initCustomEvent","Event","TributeEvents","tribute","events","key","element","boundKeydown","keydown","bind","boundKeyup","keyup","boundInput","input","addEventListener","removeEventListener","instance","shouldDeactivate","isActive","hideMenu","commandEvent","keys","forEach","o","keyCode","callbacks","toLowerCase","inputEvent","menu","contains","target","li","preventDefault","stopPropagation","nodeName","parentNode","Error","selectItemAtIndex","getAttribute","current","externalTrigger","setTimeout","updateSelection","allowSpaces","hasTrailingSpace","autocompleteMode","triggerChar","getKeyCode","isNaN","trigger","triggers","charCodeAt","mentionText","collection","menuShowMinLength","showMenuFor","eventKeyPressed","el","info","range","getTriggerInfo","mentionTriggerChar","selectedPath","mentionSelectedPath","selectedOffset","mentionSelectedOffset","e","_this","collectionItem","item","enter","filteredItems","menuSelected","escape","tab","space","spaceSelectsMatch","up","count","selected","setActiveLi","scrollTop","scrollHeight","down","index","lis","querySelectorAll","parseInt","classList","add","selectClass","liClientRect","getBoundingClientRect","menuClientRect","bottom","scrollDistance","top","remove","elem","includeMargin","height","style","currentStyle","getComputedStyle","parseFloat","marginTop","marginBottom","TributeMenuEvents","menuEvents","menuClickEvent","click","menuContainerScrollEvent","debounce","windowResizeEvent","positionMenuAtCaret","getDocument","menuContainer","func","wait","immediate","timeout","context","_this2","args","apply","callNow","clearTimeout","TributeRange","iframe","contentWindow","scrollTo","coordinates","positionMenu","cssText","isContentEditable","getTextAreaOrInputUnderlinePosition","mentionPosition","getContentEditableCaretPosition","left","right","scrollIntoView","menuDimensions","width","offsetWidth","offsetHeight","menuIsOffScreen","isMenuOffScreen","menuIsOffScreenHorizontally","innerWidth","menuIsOffScreenVertically","innerHeight","body","targetElement","path","offset","childNodes","nextSibling","previousSibling","sel","getWindowSelection","createRange","setStart","setEnd","collapse","removeAllRanges","error","addRange","focus","text","requireLeadingSpace","originalEvent","replaceEvent","myField","textSuffix","replaceTextSuffix","startPos","endPos","substring","selectionStart","selectionEnd","pasteHtml","dispatchEvent","html","anchorNode","deleteContents","createElement","innerHTML","frag","createDocumentFragment","node","lastNode","firstChild","appendChild","insertNode","cloneRange","setStartAfter","getSelection","ctx","ce","contentEditable","getNodePositionInParent","push","reverse","getRangeAt","startOffset","textComponent","selectedElem","workingNodeContent","textContent","selectStartOffset","replace","wordsArray","split","trim","menuAlreadyActive","isAutocomplete","selectionInfo","getContentEditableSelectedPath","effectiveRange","getTextPrecedingCurrentSelection","lastWordOfEffectiveRange","getLastWordInText","mentionSelectedElement","mostRecentTriggerCharPos","c","config","idx","lastIndexWithLeadingSpace","lastIndexOf","test","currentTriggerSnippet","firstSnippetChar","leadingSpace","regex","str","reversedStr","join","cidx","len","firstChar","match","triggerIdx","windowWidth","windowHeight","doc","documentElement","windowLeft","pageXOffset","scrollLeft","clientLeft","windowTop","pageYOffset","clientTop","menuTop","menuRight","menuBottom","menuLeft","Math","floor","ceil","dimensions","position","flipped","isFirefox","mozInnerScreenX","div","id","computed","whiteSpace","wordWrap","visibility","prop","overflowY","overflow","span","rect","menuContainerIsBody","offsetTop","borderTopWidth","fontSize","offsetLeft","borderLeftWidth","getMenuDimensions","parentHeight","scrollStillAvailable","removeChild","selectedNodePosition","clientRect","elemTop","elemBottom","maxY","targetY","TributeSearch","search","pattern","array","filter","string","opts","pre","post","compareString","caseSensitive","skip","rendered","score","patternCache","traverse","render","cache","stringIndex","patternIndex","calculateScore","slice","indexOf","best","temp","pop","indices","arr","reduce","prev","extract","original","sort","a","b","compare","values","containerClass","itemClass","selectTemplate","menuItemTemplate","lookup","fillAttr","noMatchTemplate","searchOpts","menuItemLimit","Tribute","defaultSelectTemplate","defaultMenuItemTemplate","t","console","warn","map","_isActive","val","noMatchEvent","matchItem","jQuery","get","constructor","NodeList","HTMLCollection","_attach","hasAttribute","ensureEditable","setAttribute","inputTypes","wrapper","ul","className","currentMentionTextSnapshot","createMenu","tributeMenu","processValues","items","querySelector","fragment","_findLiTarget","movementY","collectionIndex","activeElement","placeCaretAtEnd","insertTextAtCursor","insertAtCaret","selectNodeContents","createTextRange","textRange","moveToElementText","select","textNode","createTextNode","textarea","scrollPos","caretPos","front","back","content","replaceText","replaceTriggerText","newValues","concat","_append","_detach","unbind","removeAttribute","_this3"],"mappings":"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","sourcesContent":["if (!Array.prototype.find) {\n    Array.prototype.find = function(predicate) {\n        if (this === null) {\n            throw new TypeError('Array.prototype.find called on null or undefined')\n        }\n        if (typeof predicate !== 'function') {\n            throw new TypeError('predicate must be a function')\n        }\n        var list = Object(this)\n        var length = list.length >>> 0\n        var thisArg = arguments[1]\n        var value\n\n        for (var i = 0; i < length; i++) {\n            value = list[i]\n            if (predicate.call(thisArg, value, i, list)) {\n                return value\n            }\n        }\n        return undefined\n    }\n}\n\nif (window && typeof window.CustomEvent !== \"function\") {\n  function CustomEvent(event, params) {\n    params = params || {\n      bubbles: false,\n      cancelable: false,\n      detail: undefined\n    }\n    var evt = document.createEvent('CustomEvent')\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail)\n    return evt\n  }\n\n if (typeof window.Event !== 'undefined') {\n   CustomEvent.prototype = window.Event.prototype\n }\n\n  window.CustomEvent = CustomEvent\n}","class TributeEvents {\n  constructor(tribute) {\n    this.tribute = tribute;\n    this.tribute.events = this;\n  }\n\n  static keys() {\n    return [\n      {\n        key: 9,\n        value: \"TAB\"\n      },\n      {\n        key: 8,\n        value: \"DELETE\"\n      },\n      {\n        key: 13,\n        value: \"ENTER\"\n      },\n      {\n        key: 27,\n        value: \"ESCAPE\"\n      },\n      {\n        key: 32,\n        value: \"SPACE\"\n      },\n      {\n        key: 38,\n        value: \"UP\"\n      },\n      {\n        key: 40,\n        value: \"DOWN\"\n      }\n    ];\n  }\n\n  bind(element) {\n    element.boundKeydown = this.keydown.bind(element, this);\n    element.boundKeyup = this.keyup.bind(element, this);\n    element.boundInput = this.input.bind(element, this);\n\n    element.addEventListener(\"keydown\", element.boundKeydown, false);\n    element.addEventListener(\"keyup\", element.boundKeyup, false);\n    element.addEventListener(\"input\", element.boundInput, false);\n  }\n\n  unbind(element) {\n    element.removeEventListener(\"keydown\", element.boundKeydown, false);\n    element.removeEventListener(\"keyup\", element.boundKeyup, false);\n    element.removeEventListener(\"input\", element.boundInput, false);\n\n    delete element.boundKeydown;\n    delete element.boundKeyup;\n    delete element.boundInput;\n  }\n\n  keydown(instance, event) {\n    if (instance.shouldDeactivate(event)) {\n      instance.tribute.isActive = false;\n      instance.tribute.hideMenu();\n    }\n\n    let element = this;\n    instance.commandEvent = false;\n\n    TributeEvents.keys().forEach(o => {\n      if (o.key === event.keyCode) {\n        instance.commandEvent = true;\n        instance.callbacks()[o.value.toLowerCase()](event, element);\n      }\n    });\n  }\n\n  input(instance, event) {\n    instance.inputEvent = true;\n    instance.keyup.call(this, instance, event);\n  }\n\n  click(instance, event) {\n    let tribute = instance.tribute;\n    if (tribute.menu && tribute.menu.contains(event.target)) {\n      let li = event.target;\n      event.preventDefault();\n      event.stopPropagation();\n      while (li.nodeName.toLowerCase() !== \"li\") {\n        li = li.parentNode;\n        if (!li || li === tribute.menu) {\n          throw new Error(\"cannot find the <li> container for the click\");\n        }\n      }\n      tribute.selectItemAtIndex(li.getAttribute(\"data-index\"), event);\n      tribute.hideMenu();\n\n      // TODO: should fire with externalTrigger and target is outside of menu\n    } else if (tribute.current.element && !tribute.current.externalTrigger) {\n      tribute.current.externalTrigger = false;\n      setTimeout(() => tribute.hideMenu());\n    }\n  }\n\n  keyup(instance, event) {\n    if (instance.inputEvent) {\n      instance.inputEvent = false;\n    }\n    instance.updateSelection(this);\n\n    if (event.keyCode === 27) return;\n\n    if (!instance.tribute.allowSpaces && instance.tribute.hasTrailingSpace) {\n      instance.tribute.hasTrailingSpace = false;\n      instance.commandEvent = true;\n      instance.callbacks()[\"space\"](event, this);\n      return;\n    }\n\n    if (!instance.tribute.isActive) {\n      if (instance.tribute.autocompleteMode) {\n        instance.callbacks().triggerChar(event, this, \"\");\n      } else {\n        let keyCode = instance.getKeyCode(instance, this, event);\n\n        if (isNaN(keyCode) || !keyCode) return;\n\n        let trigger = instance.tribute.triggers().find(trigger => {\n          return trigger.charCodeAt(0) === keyCode;\n        });\n\n        if (typeof trigger !== \"undefined\") {\n          instance.callbacks().triggerChar(event, this, trigger);\n        }\n      }\n    }\n\n    if (\n      instance.tribute.current.mentionText.length <\n      instance.tribute.current.collection.menuShowMinLength\n    ) {\n      return;\n    }\n\n    if (\n      ((instance.tribute.current.trigger ||\n        instance.tribute.autocompleteMode) &&\n        instance.commandEvent === false) ||\n      (instance.tribute.isActive && event.keyCode === 8)\n    ) {\n      instance.tribute.showMenuFor(this, true);\n    }\n  }\n\n  shouldDeactivate(event) {\n    if (!this.tribute.isActive) return false;\n\n    if (this.tribute.current.mentionText.length === 0) {\n      let eventKeyPressed = false;\n      TributeEvents.keys().forEach(o => {\n        if (event.keyCode === o.key) eventKeyPressed = true;\n      });\n\n      return !eventKeyPressed;\n    }\n\n    return false;\n  }\n\n  getKeyCode(instance, el, event) {\n    let char;\n    let tribute = instance.tribute;\n    let info = tribute.range.getTriggerInfo(\n      false,\n      tribute.hasTrailingSpace,\n      true,\n      tribute.allowSpaces,\n      tribute.autocompleteMode\n    );\n\n    if (info) {\n      return info.mentionTriggerChar.charCodeAt(0);\n    } else {\n      return false;\n    }\n  }\n\n  updateSelection(el) {\n    this.tribute.current.element = el;\n    let info = this.tribute.range.getTriggerInfo(\n      false,\n      this.tribute.hasTrailingSpace,\n      true,\n      this.tribute.allowSpaces,\n      this.tribute.autocompleteMode\n    );\n\n    if (info) {\n      this.tribute.current.selectedPath = info.mentionSelectedPath;\n      this.tribute.current.mentionText = info.mentionText;\n      this.tribute.current.selectedOffset = info.mentionSelectedOffset;\n    }\n  }\n\n  callbacks() {\n    return {\n      triggerChar: (e, el, trigger) => {\n        let tribute = this.tribute;\n        tribute.current.trigger = trigger;\n\n        let collectionItem = tribute.collection.find(item => {\n          return item.trigger === trigger;\n        });\n\n        tribute.current.collection = collectionItem;\n\n        if (\n          tribute.current.mentionText.length >=\n            tribute.current.collection.menuShowMinLength &&\n          tribute.inputEvent\n        ) {\n          tribute.showMenuFor(el, true);\n        }\n      },\n      enter: (e, el) => {\n        // choose selection\n        if (this.tribute.isActive && this.tribute.current.filteredItems) {\n          e.preventDefault();\n          e.stopPropagation();\n          setTimeout(() => {\n            this.tribute.selectItemAtIndex(this.tribute.menuSelected, e);\n            this.tribute.hideMenu();\n          }, 0);\n        }\n      },\n      escape: (e, el) => {\n        if (this.tribute.isActive) {\n          e.preventDefault();\n          e.stopPropagation();\n          this.tribute.isActive = false;\n          this.tribute.hideMenu();\n        }\n      },\n      tab: (e, el) => {\n        // choose first match\n        this.callbacks().enter(e, el);\n      },\n      space: (e, el) => {\n        if (this.tribute.isActive) {\n          if (this.tribute.spaceSelectsMatch) {\n            this.callbacks().enter(e, el);\n          } else if (!this.tribute.allowSpaces) {\n            e.stopPropagation();\n            setTimeout(() => {\n              this.tribute.hideMenu();\n              this.tribute.isActive = false;\n            }, 0);\n          }\n        }\n      },\n      up: (e, el) => {\n        // navigate up ul\n        if (this.tribute.isActive && this.tribute.current.filteredItems) {\n          e.preventDefault();\n          e.stopPropagation();\n          let count = this.tribute.current.filteredItems.length,\n            selected = this.tribute.menuSelected;\n\n          if (count > selected && selected > 0) {\n            this.tribute.menuSelected--;\n            this.setActiveLi();\n          } else if (selected === 0) {\n            this.tribute.menuSelected = count - 1;\n            this.setActiveLi();\n            this.tribute.menu.scrollTop = this.tribute.menu.scrollHeight;\n          }\n        }\n      },\n      down: (e, el) => {\n        // navigate down ul\n        if (this.tribute.isActive && this.tribute.current.filteredItems) {\n          e.preventDefault();\n          e.stopPropagation();\n          let count = this.tribute.current.filteredItems.length - 1,\n            selected = this.tribute.menuSelected;\n\n          if (count > selected) {\n            this.tribute.menuSelected++;\n            this.setActiveLi();\n          } else if (count === selected) {\n            this.tribute.menuSelected = 0;\n            this.setActiveLi();\n            this.tribute.menu.scrollTop = 0;\n          }\n        }\n      },\n      delete: (e, el) => {\n        if (\n          this.tribute.isActive &&\n          this.tribute.current.mentionText.length < 1\n        ) {\n          this.tribute.hideMenu();\n        } else if (this.tribute.isActive) {\n          this.tribute.showMenuFor(el);\n        }\n      }\n    };\n  }\n\n  setActiveLi(index) {\n    let lis = this.tribute.menu.querySelectorAll(\"li\"),\n      length = lis.length >>> 0;\n\n    if (index) this.tribute.menuSelected = parseInt(index);\n\n    for (let i = 0; i < length; i++) {\n      let li = lis[i];\n      if (i === this.tribute.menuSelected) {\n        li.classList.add(this.tribute.current.collection.selectClass);\n\n        let liClientRect = li.getBoundingClientRect();\n        let menuClientRect = this.tribute.menu.getBoundingClientRect();\n\n        if (liClientRect.bottom > menuClientRect.bottom) {\n          let scrollDistance = liClientRect.bottom - menuClientRect.bottom;\n          this.tribute.menu.scrollTop += scrollDistance;\n        } else if (liClientRect.top < menuClientRect.top) {\n          let scrollDistance = menuClientRect.top - liClientRect.top;\n          this.tribute.menu.scrollTop -= scrollDistance;\n        }\n      } else {\n        li.classList.remove(this.tribute.current.collection.selectClass);\n      }\n    }\n  }\n\n  getFullHeight(elem, includeMargin) {\n    let height = elem.getBoundingClientRect().height;\n\n    if (includeMargin) {\n      let style = elem.currentStyle || window.getComputedStyle(elem);\n      return (\n        height + parseFloat(style.marginTop) + parseFloat(style.marginBottom)\n      );\n    }\n\n    return height;\n  }\n}\n\nexport default TributeEvents;\n","class TributeMenuEvents {\n  constructor(tribute) {\n    this.tribute = tribute;\n    this.tribute.menuEvents = this;\n    this.menu = this.tribute.menu;\n  }\n\n  bind(menu) {\n    this.menuClickEvent = this.tribute.events.click.bind(null, this);\n    this.menuContainerScrollEvent = this.debounce(\n      () => {\n        if (this.tribute.isActive) {\n          this.tribute.showMenuFor(this.tribute.current.element, false);\n        }\n      },\n      300,\n      false\n    );\n    this.windowResizeEvent = this.debounce(\n      () => {\n        if (this.tribute.isActive) {\n          this.tribute.range.positionMenuAtCaret(true);\n        }\n      },\n      300,\n      false\n    );\n\n    // fixes IE11 issues with mousedown\n    this.tribute.range\n      .getDocument()\n      .addEventListener(\"MSPointerDown\", this.menuClickEvent, false);\n    this.tribute.range\n      .getDocument()\n      .addEventListener(\"mousedown\", this.menuClickEvent, false);\n    window.addEventListener(\"resize\", this.windowResizeEvent);\n\n    if (this.menuContainer) {\n      this.menuContainer.addEventListener(\n        \"scroll\",\n        this.menuContainerScrollEvent,\n        false\n      );\n    } else {\n      window.addEventListener(\"scroll\", this.menuContainerScrollEvent);\n    }\n  }\n\n  unbind(menu) {\n    this.tribute.range\n      .getDocument()\n      .removeEventListener(\"mousedown\", this.menuClickEvent, false);\n    this.tribute.range\n      .getDocument()\n      .removeEventListener(\"MSPointerDown\", this.menuClickEvent, false);\n    window.removeEventListener(\"resize\", this.windowResizeEvent);\n\n    if (this.menuContainer) {\n      this.menuContainer.removeEventListener(\n        \"scroll\",\n        this.menuContainerScrollEvent,\n        false\n      );\n    } else {\n      window.removeEventListener(\"scroll\", this.menuContainerScrollEvent);\n    }\n  }\n\n  debounce(func, wait, immediate) {\n    var timeout;\n    return () => {\n      var context = this,\n        args = arguments;\n      var later = () => {\n        timeout = null;\n        if (!immediate) func.apply(context, args);\n      };\n      var callNow = immediate && !timeout;\n      clearTimeout(timeout);\n      timeout = setTimeout(later, wait);\n      if (callNow) func.apply(context, args);\n    };\n  }\n}\n\nexport default TributeMenuEvents;\n","// Thanks to https://github.com/jeff-collins/ment.io\nimport \"./utils\";\n\nclass TributeRange {\n    constructor(tribute) {\n        this.tribute = tribute\n        this.tribute.range = this\n    }\n\n    getDocument() {\n        let iframe\n        if (this.tribute.current.collection) {\n            iframe = this.tribute.current.collection.iframe\n        }\n\n        if (!iframe) {\n            return document\n        }\n\n        return iframe.contentWindow.document\n    }\n\n    positionMenuAtCaret(scrollTo) {\n        let context = this.tribute.current,\n            coordinates\n\n        let info = this.getTriggerInfo(false, this.tribute.hasTrailingSpace, true, this.tribute.allowSpaces, this.tribute.autocompleteMode)\n\n        if (typeof info !== 'undefined') {\n\n            if(!this.tribute.positionMenu){\n                this.tribute.menu.style.cssText = `display: block;`\n                return\n            }\n\n            if (!this.isContentEditable(context.element)) {\n                coordinates = this.getTextAreaOrInputUnderlinePosition(this.tribute.current.element,\n                    info.mentionPosition)\n            }\n            else {\n                coordinates = this.getContentEditableCaretPosition(info.mentionPosition)\n            }\n\n            this.tribute.menu.style.cssText = `top: ${coordinates.top}px;\n                                     left: ${coordinates.left}px;\n                                     right: ${coordinates.right}px;\n                                     bottom: ${coordinates.bottom}px;\n                                     position: absolute;\n                                     display: block;`\n\n            if (coordinates.left === 'auto') {\n                this.tribute.menu.style.left = 'auto'\n            }\n\n            if (coordinates.top === 'auto') {\n                this.tribute.menu.style.top = 'auto'\n            }\n\n            if (scrollTo) this.scrollIntoView()\n\n            window.setTimeout(() => {\n                let menuDimensions = {\n                   width: this.tribute.menu.offsetWidth,\n                   height: this.tribute.menu.offsetHeight\n                }\n                let menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions)\n\n                let menuIsOffScreenHorizontally = window.innerWidth > menuDimensions.width && (menuIsOffScreen.left || menuIsOffScreen.right)\n                let menuIsOffScreenVertically = window.innerHeight > menuDimensions.height && (menuIsOffScreen.top || menuIsOffScreen.bottom)\n                if (menuIsOffScreenHorizontally || menuIsOffScreenVertically) {\n                    this.tribute.menu.style.cssText = 'display: none'\n                    this.positionMenuAtCaret(scrollTo)\n                }\n            }, 0)\n\n        } else {\n            this.tribute.menu.style.cssText = 'display: none'\n        }\n    }\n\n    get menuContainerIsBody() {\n        return this.tribute.menuContainer === document.body || !this.tribute.menuContainer;\n    }\n\n\n    selectElement(targetElement, path, offset) {\n        let range\n        let elem = targetElement\n\n        if (path) {\n            for (var i = 0; i < path.length; i++) {\n                elem = elem.childNodes[path[i]]\n                if (elem === undefined) {\n                    return\n                }\n                while (elem.length < offset) {\n                    offset -= elem.length\n                    elem = elem.nextSibling\n                }\n                if (elem.childNodes.length === 0 && !elem.length) {\n                    elem = elem.previousSibling\n                }\n            }\n        }\n        let sel = this.getWindowSelection()\n\n        range = this.getDocument().createRange()\n        range.setStart(elem, offset)\n        range.setEnd(elem, offset)\n        range.collapse(true)\n\n        try {\n            sel.removeAllRanges()\n        } catch (error) {}\n\n        sel.addRange(range)\n        targetElement.focus()\n    }\n\n    replaceTriggerText(text, requireLeadingSpace, hasTrailingSpace, originalEvent, item) {\n        let info = this.getTriggerInfo(true, hasTrailingSpace, requireLeadingSpace, this.tribute.allowSpaces, this.tribute.autocompleteMode)\n\n        if (info !== undefined) {\n            let context = this.tribute.current\n            let replaceEvent = new CustomEvent('tribute-replaced', {\n                detail: {\n                    item: item,\n                    instance: context,\n                    context: info,\n                    event: originalEvent,\n                }\n            })\n\n            if (!this.isContentEditable(context.element)) {\n                let myField = this.tribute.current.element\n                let textSuffix = typeof this.tribute.replaceTextSuffix == 'string'\n                    ? this.tribute.replaceTextSuffix\n                    : ' '\n                text += textSuffix\n                let startPos = info.mentionPosition\n                let endPos = info.mentionPosition + info.mentionText.length + textSuffix.length\n                if (!this.tribute.autocompleteMode) {\n                    endPos += info.mentionTriggerChar.length - 1\n                }\n                myField.value = myField.value.substring(0, startPos) + text +\n                    myField.value.substring(endPos, myField.value.length)\n                myField.selectionStart = startPos + text.length\n                myField.selectionEnd = startPos + text.length\n            } else {\n                // add a space to the end of the pasted text\n                let textSuffix = typeof this.tribute.replaceTextSuffix == 'string'\n                    ? this.tribute.replaceTextSuffix\n                    : '\\xA0'\n                text += textSuffix\n                let endPos = info.mentionPosition + info.mentionText.length\n                if (!this.tribute.autocompleteMode) {\n                    endPos += info.mentionTriggerChar.length\n                }\n                this.pasteHtml(text, info.mentionPosition, endPos)\n            }\n\n            context.element.dispatchEvent(new CustomEvent('input', { bubbles: true }))\n            context.element.dispatchEvent(replaceEvent)\n        }\n    }\n\n    pasteHtml(html, startPos, endPos) {\n        let range, sel\n        sel = this.getWindowSelection()\n        range = this.getDocument().createRange()\n        range.setStart(sel.anchorNode, startPos)\n        range.setEnd(sel.anchorNode, endPos)\n        range.deleteContents()\n\n        let el = this.getDocument().createElement('div')\n        el.innerHTML = html\n        let frag = this.getDocument().createDocumentFragment(),\n            node, lastNode\n        while ((node = el.firstChild)) {\n            lastNode = frag.appendChild(node)\n        }\n        range.insertNode(frag)\n\n        // Preserve the selection\n        if (lastNode) {\n            range = range.cloneRange()\n            range.setStartAfter(lastNode)\n            range.collapse(true)\n            sel.removeAllRanges()\n            sel.addRange(range)\n        }\n    }\n\n    getWindowSelection() {\n        if (this.tribute.collection.iframe) {\n            return this.tribute.collection.iframe.contentWindow.getSelection()\n        }\n\n        return window.getSelection()\n    }\n\n    getNodePositionInParent(element) {\n        if (element.parentNode === null) {\n            return 0\n        }\n\n        for (var i = 0; i < element.parentNode.childNodes.length; i++) {\n            let node = element.parentNode.childNodes[i]\n\n            if (node === element) {\n                return i\n            }\n        }\n    }\n\n    getContentEditableSelectedPath(ctx) {\n        let sel = this.getWindowSelection()\n        let selected = sel.anchorNode\n        let path = []\n        let offset\n\n        if (selected != null) {\n            let i\n            let ce = selected.contentEditable\n            while (selected !== null && ce !== 'true') {\n                i = this.getNodePositionInParent(selected)\n                path.push(i)\n                selected = selected.parentNode\n                if (selected !== null) {\n                    ce = selected.contentEditable\n                }\n            }\n            path.reverse()\n\n            // getRangeAt may not exist, need alternative\n            offset = sel.getRangeAt(0).startOffset\n\n            return {\n                selected: selected,\n                path: path,\n                offset: offset\n            }\n        }\n    }\n\n    getTextPrecedingCurrentSelection() {\n        let context = this.tribute.current,\n            text = ''\n\n        if (!this.isContentEditable(context.element)) {\n            let textComponent = this.tribute.current.element;\n            if (textComponent) {\n                let startPos = textComponent.selectionStart\n                if (textComponent.value && startPos >= 0) {\n                    text = textComponent.value.substring(0, startPos)\n                }\n            }\n\n        } else {\n            let selectedElem = this.getWindowSelection().anchorNode\n\n            if (selectedElem != null) {\n                let workingNodeContent = selectedElem.textContent\n                let selectStartOffset = this.getWindowSelection().getRangeAt(0).startOffset\n\n                if (workingNodeContent && selectStartOffset >= 0) {\n                    text = workingNodeContent.substring(0, selectStartOffset)\n                }\n            }\n        }\n\n        return text\n    }\n\n    getLastWordInText(text) {\n        text = text.replace(/\\u00A0/g, ' '); // https://stackoverflow.com/questions/29850407/how-do-i-replace-unicode-character-u00a0-with-a-space-in-javascript\n        let wordsArray = text.split(/\\s+/);\n        let worldsCount = wordsArray.length - 1\n        return wordsArray[worldsCount].trim()\n    }\n\n    getTriggerInfo(menuAlreadyActive, hasTrailingSpace, requireLeadingSpace, allowSpaces, isAutocomplete) {\n        let ctx = this.tribute.current\n        let selected, path, offset\n\n        if (!this.isContentEditable(ctx.element)) {\n            selected = this.tribute.current.element\n        } else {\n            let selectionInfo = this.getContentEditableSelectedPath(ctx)\n\n            if (selectionInfo) {\n                selected = selectionInfo.selected\n                path = selectionInfo.path\n                offset = selectionInfo.offset\n            }\n        }\n\n        let effectiveRange = this.getTextPrecedingCurrentSelection()\n        let lastWordOfEffectiveRange = this.getLastWordInText(effectiveRange)\n\n        if (isAutocomplete) {\n            return {\n                mentionPosition: effectiveRange.length - lastWordOfEffectiveRange.length,\n                mentionText: lastWordOfEffectiveRange,\n                mentionSelectedElement: selected,\n                mentionSelectedPath: path,\n                mentionSelectedOffset: offset\n            }\n        }\n\n        if (effectiveRange !== undefined && effectiveRange !== null) {\n            let mostRecentTriggerCharPos = -1\n            let triggerChar\n\n            this.tribute.collection.forEach(config => {\n                let c = config.trigger\n                let idx = config.requireLeadingSpace ?\n                    this.lastIndexWithLeadingSpace(effectiveRange, c) :\n                    effectiveRange.lastIndexOf(c)\n\n                if (idx > mostRecentTriggerCharPos) {\n                    mostRecentTriggerCharPos = idx\n                    triggerChar = c\n                    requireLeadingSpace = config.requireLeadingSpace\n                }\n            })\n\n            if (mostRecentTriggerCharPos >= 0 &&\n                (\n                    mostRecentTriggerCharPos === 0 ||\n                    !requireLeadingSpace ||\n                    /[\\xA0\\s]/g.test(\n                        effectiveRange.substring(\n                            mostRecentTriggerCharPos - 1,\n                            mostRecentTriggerCharPos)\n                    )\n                )\n            ) {\n                let currentTriggerSnippet = effectiveRange.substring(mostRecentTriggerCharPos + triggerChar.length,\n                    effectiveRange.length)\n\n                triggerChar = effectiveRange.substring(mostRecentTriggerCharPos, mostRecentTriggerCharPos + triggerChar.length)\n                let firstSnippetChar = currentTriggerSnippet.substring(0, 1)\n                let leadingSpace = currentTriggerSnippet.length > 0 &&\n                    (\n                        firstSnippetChar === ' ' ||\n                        firstSnippetChar === '\\xA0'\n                    )\n                if (hasTrailingSpace) {\n                    currentTriggerSnippet = currentTriggerSnippet.trim()\n                }\n\n                let regex = allowSpaces ? /[^\\S ]/g : /[\\xA0\\s]/g;\n\n                this.tribute.hasTrailingSpace = regex.test(currentTriggerSnippet);\n\n                if (!leadingSpace && (menuAlreadyActive || !(regex.test(currentTriggerSnippet)))) {\n                    return {\n                        mentionPosition: mostRecentTriggerCharPos,\n                        mentionText: currentTriggerSnippet,\n                        mentionSelectedElement: selected,\n                        mentionSelectedPath: path,\n                        mentionSelectedOffset: offset,\n                        mentionTriggerChar: triggerChar\n                    }\n                }\n            }\n        }\n    }\n\n    lastIndexWithLeadingSpace (str, trigger) {\n        let reversedStr = str.split('').reverse().join('')\n        let index = -1\n\n        for (let cidx = 0, len = str.length; cidx < len; cidx++) {\n            let firstChar = cidx === str.length - 1\n            let leadingSpace = /\\s/.test(reversedStr[cidx + 1])\n\n            let match = true\n            for (let triggerIdx = trigger.length - 1; triggerIdx >= 0; triggerIdx--) {\n              if (trigger[triggerIdx] !== reversedStr[cidx-triggerIdx]) {\n                match = false\n                break\n              }\n            }\n\n            if (match && (firstChar || leadingSpace)) {\n                index = str.length - 1 - cidx\n                break\n            }\n        }\n\n        return index\n    }\n\n    isContentEditable(element) {\n        return element.nodeName !== 'INPUT' && element.nodeName !== 'TEXTAREA'\n    }\n\n    isMenuOffScreen(coordinates, menuDimensions) {\n        let windowWidth = window.innerWidth\n        let windowHeight = window.innerHeight\n        let doc = document.documentElement\n        let windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0)\n        let windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0)\n\n        let menuTop = typeof coordinates.top === 'number' ? coordinates.top : windowTop + windowHeight - coordinates.bottom - menuDimensions.height\n        let menuRight = typeof coordinates.right === 'number' ? coordinates.right : coordinates.left + menuDimensions.width\n        let menuBottom = typeof coordinates.bottom === 'number' ? coordinates.bottom : coordinates.top + menuDimensions.height\n        let menuLeft = typeof coordinates.left === 'number' ? coordinates.left : windowLeft + windowWidth - coordinates.right - menuDimensions.width\n\n        return {\n            top: menuTop < Math.floor(windowTop),\n            right: menuRight > Math.ceil(windowLeft + windowWidth),\n            bottom: menuBottom > Math.ceil(windowTop + windowHeight),\n            left: menuLeft < Math.floor(windowLeft)\n        }\n    }\n\n    getMenuDimensions() {\n        // Width of the menu depends of its contents and position\n        // We must check what its width would be without any obstruction\n        // This way, we can achieve good positioning for flipping the menu\n        let dimensions = {\n            width: null,\n            height: null\n        }\n\n        this.tribute.menu.style.cssText = `top: 0px;\n                                 left: 0px;\n                                 position: fixed;\n                                 display: block;\n                                 visibility; hidden;`\n       dimensions.width = this.tribute.menu.offsetWidth\n       dimensions.height = this.tribute.menu.offsetHeight\n\n       this.tribute.menu.style.cssText = `display: none;`\n\n       return dimensions\n    }\n\n    getTextAreaOrInputUnderlinePosition(element, position, flipped) {\n        let properties = ['direction', 'boxSizing', 'width', 'height', 'overflowX',\n            'overflowY', 'borderTopWidth', 'borderRightWidth',\n            'borderBottomWidth', 'borderLeftWidth', 'paddingTop',\n            'paddingRight', 'paddingBottom', 'paddingLeft',\n            'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch',\n            'fontSize', 'fontSizeAdjust', 'lineHeight', 'fontFamily',\n            'textAlign', 'textTransform', 'textIndent',\n            'textDecoration', 'letterSpacing', 'wordSpacing'\n        ]\n\n        let isFirefox = (window.mozInnerScreenX !== null)\n\n        let div = this.getDocument().createElement('div')\n        div.id = 'input-textarea-caret-position-mirror-div'\n        this.getDocument().body.appendChild(div)\n\n        let style = div.style\n        let computed = window.getComputedStyle ? getComputedStyle(element) : element.currentStyle\n\n        style.whiteSpace = 'pre-wrap'\n        if (element.nodeName !== 'INPUT') {\n            style.wordWrap = 'break-word'\n        }\n\n        // position off-screen\n        style.position = 'absolute'\n        style.visibility = 'hidden'\n\n        // transfer the element's properties to the div\n        properties.forEach(prop => {\n            style[prop] = computed[prop]\n        })\n\n        if (isFirefox) {\n            style.width = `${(parseInt(computed.width) - 2)}px`\n            if (element.scrollHeight > parseInt(computed.height))\n                style.overflowY = 'scroll'\n        } else {\n            style.overflow = 'hidden'\n        }\n\n        div.textContent = element.value.substring(0, position)\n\n        if (element.nodeName === 'INPUT') {\n            div.textContent = div.textContent.replace(/\\s/g, ' ')\n        }\n\n        let span = this.getDocument().createElement('span')\n        span.textContent = element.value.substring(position) || '.'\n        div.appendChild(span)\n\n        let rect = element.getBoundingClientRect()\n        let doc = document.documentElement\n        let windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0)\n        let windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0)\n\n        let top = 0;\n        let left = 0;\n        if (this.menuContainerIsBody) {\n          top = rect.top;\n          left = rect.left;\n        }\n\n        let coordinates = {\n            top: top + windowTop + span.offsetTop + parseInt(computed.borderTopWidth) + parseInt(computed.fontSize) - element.scrollTop,\n            left: left + windowLeft + span.offsetLeft + parseInt(computed.borderLeftWidth)\n        }\n\n        let windowWidth = window.innerWidth\n        let windowHeight = window.innerHeight\n\n        let menuDimensions = this.getMenuDimensions()\n        let menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions)\n\n        if (menuIsOffScreen.right) {\n            coordinates.right = windowWidth - coordinates.left\n            coordinates.left = 'auto'\n        }\n\n        let parentHeight = this.tribute.menuContainer\n            ? this.tribute.menuContainer.offsetHeight\n            : this.getDocument().body.offsetHeight\n\n        if (menuIsOffScreen.bottom) {\n            let parentRect = this.tribute.menuContainer\n                ? this.tribute.menuContainer.getBoundingClientRect()\n                : this.getDocument().body.getBoundingClientRect()\n            let scrollStillAvailable = parentHeight - (windowHeight - parentRect.top)\n\n            coordinates.bottom = scrollStillAvailable + (windowHeight - rect.top - span.offsetTop)\n            coordinates.top = 'auto'\n        }\n\n        menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions)\n        if (menuIsOffScreen.left) {\n            coordinates.left = windowWidth > menuDimensions.width\n                ? windowLeft + windowWidth - menuDimensions.width\n                : windowLeft\n            delete coordinates.right\n        }\n        if (menuIsOffScreen.top) {\n            coordinates.top = windowHeight > menuDimensions.height\n                ? windowTop + windowHeight - menuDimensions.height\n                : windowTop\n            delete coordinates.bottom\n        }\n\n        this.getDocument().body.removeChild(div)\n        return coordinates\n    }\n\n    getContentEditableCaretPosition(selectedNodePosition) {\n        let range\n        let sel = this.getWindowSelection()\n\n        range = this.getDocument().createRange()\n        range.setStart(sel.anchorNode, selectedNodePosition)\n        range.setEnd(sel.anchorNode, selectedNodePosition)\n\n        range.collapse(false)\n\n        let rect = range.getBoundingClientRect()\n        let doc = document.documentElement\n        let windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0)\n        let windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0)\n\n        let left = rect.left\n        let top = rect.top\n\n        let coordinates = {\n            left: left + windowLeft,\n            top: top + rect.height + windowTop\n        }\n        let windowWidth = window.innerWidth\n        let windowHeight = window.innerHeight\n\n        let menuDimensions = this.getMenuDimensions()\n        let menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions)\n\n        if (menuIsOffScreen.right) {\n            coordinates.left = 'auto'\n            coordinates.right = windowWidth - rect.left - windowLeft\n        }\n\n        let parentHeight = this.tribute.menuContainer\n            ? this.tribute.menuContainer.offsetHeight\n            : this.getDocument().body.offsetHeight\n\n        if (menuIsOffScreen.bottom) {\n            let parentRect = this.tribute.menuContainer\n                ? this.tribute.menuContainer.getBoundingClientRect()\n                : this.getDocument().body.getBoundingClientRect()\n            let scrollStillAvailable = parentHeight - (windowHeight - parentRect.top)\n\n            coordinates.top = 'auto'\n            coordinates.bottom = scrollStillAvailable + (windowHeight - rect.top)\n        }\n\n        menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions)\n        if (menuIsOffScreen.left) {\n            coordinates.left = windowWidth > menuDimensions.width\n                ? windowLeft + windowWidth - menuDimensions.width\n                : windowLeft\n            delete coordinates.right\n        }\n        if (menuIsOffScreen.top) {\n            coordinates.top = windowHeight > menuDimensions.height\n                ? windowTop + windowHeight - menuDimensions.height\n                : windowTop\n            delete coordinates.bottom\n        }\n\n        if (!this.menuContainerIsBody) {\n            coordinates.left = coordinates.left ? coordinates.left - this.tribute.menuContainer.offsetLeft : coordinates.left\n            coordinates.top = coordinates.top ? coordinates.top - this.tribute.menuContainer.offsetTop : coordinates.top\n        }\n\n        return coordinates\n    }\n\n    scrollIntoView(elem) {\n        let reasonableBuffer = 20,\n            clientRect\n        let maxScrollDisplacement = 100\n        let e = this.menu\n\n        if (typeof e === 'undefined') return;\n\n        while (clientRect === undefined || clientRect.height === 0) {\n            clientRect = e.getBoundingClientRect()\n\n            if (clientRect.height === 0) {\n                e = e.childNodes[0]\n                if (e === undefined || !e.getBoundingClientRect) {\n                    return\n                }\n            }\n        }\n\n        let elemTop = clientRect.top\n        let elemBottom = elemTop + clientRect.height\n\n        if (elemTop < 0) {\n            window.scrollTo(0, window.pageYOffset + clientRect.top - reasonableBuffer)\n        } else if (elemBottom > window.innerHeight) {\n            let maxY = window.pageYOffset + clientRect.top - reasonableBuffer\n\n            if (maxY - window.pageYOffset > maxScrollDisplacement) {\n                maxY = window.pageYOffset + maxScrollDisplacement\n            }\n\n            let targetY = window.pageYOffset - (window.innerHeight - elemBottom)\n\n            if (targetY > maxY) {\n                targetY = maxY\n            }\n\n            window.scrollTo(0, targetY)\n        }\n    }\n}\n\n\nexport default TributeRange;\n","// Thanks to https://github.com/mattyork/fuzzy\nclass TributeSearch {\n    constructor(tribute) {\n        this.tribute = tribute\n        this.tribute.search = this\n    }\n\n    simpleFilter(pattern, array) {\n        return array.filter(string => {\n            return this.test(pattern, string)\n        })\n    }\n\n    test(pattern, string) {\n        return this.match(pattern, string) !== null\n    }\n\n    match(pattern, string, opts) {\n        opts = opts || {}\n        let patternIdx = 0,\n            result = [],\n            len = string.length,\n            totalScore = 0,\n            currScore = 0,\n            pre = opts.pre || '',\n            post = opts.post || '',\n            compareString = opts.caseSensitive && string || string.toLowerCase(),\n            ch, compareChar\n\n        if (opts.skip) {\n            return {rendered: string, score: 0}\n        }\n\n        pattern = opts.caseSensitive && pattern || pattern.toLowerCase()\n\n        let patternCache = this.traverse(compareString, pattern, 0, 0, [])\n        if (!patternCache) {\n            return null\n        }\n        return {\n            rendered: this.render(string, patternCache.cache, pre, post),\n            score: patternCache.score\n        }\n    }\n\n    traverse(string, pattern, stringIndex, patternIndex, patternCache) {\n        // if the pattern search at end\n        if (pattern.length === patternIndex) {\n\n            // calculate score and copy the cache containing the indices where it's found\n            return {\n                score: this.calculateScore(patternCache),\n                cache: patternCache.slice()\n            }\n        }\n\n        // if string at end or remaining pattern > remaining string\n        if (string.length === stringIndex || pattern.length - patternIndex > string.length - stringIndex) {\n            return undefined\n        }\n\n        let c = pattern[patternIndex]\n        let index = string.indexOf(c, stringIndex)\n        let best, temp\n\n        while (index > -1) {\n            patternCache.push(index)\n            temp = this.traverse(string, pattern, index + 1, patternIndex + 1, patternCache)\n            patternCache.pop()\n\n            // if downstream traversal failed, return best answer so far\n            if (!temp) {\n                return best\n            }\n\n            if (!best || best.score < temp.score) {\n                best = temp\n            }\n\n            index = string.indexOf(c, index + 1)\n        }\n\n        return best\n    }\n\n    calculateScore(patternCache) {\n        let score = 0\n        let temp = 1\n\n        patternCache.forEach((index, i) => {\n            if (i > 0) {\n                if (patternCache[i - 1] + 1 === index) {\n                    temp += temp + 1\n                }\n                else {\n                    temp = 1\n                }\n            }\n\n            score += temp\n        })\n\n        return score\n    }\n\n    render(string, indices, pre, post) {\n        var rendered = string.substring(0, indices[0])\n\n        indices.forEach((index, i) => {\n            rendered += pre + string[index] + post +\n                string.substring(index + 1, (indices[i + 1]) ? indices[i + 1] : string.length)\n        })\n\n        return rendered\n    }\n\n    filter(pattern, arr, opts) {\n        opts = opts || {}\n        return arr\n            .reduce((prev, element, idx, arr) => {\n                let str = element\n\n                if (opts.extract) {\n                    str = opts.extract(element)\n\n                    if (!str) { // take care of undefineds / nulls / etc.\n                        str = ''\n                    }\n                }\n\n                let rendered = this.match(pattern, str, opts)\n\n                if (rendered != null) {\n                    prev[prev.length] = {\n                        string: rendered.rendered,\n                        score: rendered.score,\n                        index: idx,\n                        original: element\n                    }\n                }\n\n                return prev\n            }, [])\n\n        .sort((a, b) => {\n            let compare = b.score - a.score\n            if (compare) return compare\n            return a.index - b.index\n        })\n    }\n}\n\nexport default TributeSearch;\n","import \"./utils\";\nimport TributeEvents from \"./TributeEvents\";\nimport TributeMenuEvents from \"./TributeMenuEvents\";\nimport TributeRange from \"./TributeRange\";\nimport TributeSearch from \"./TributeSearch\";\n\nclass Tribute {\n  constructor({\n    values = null,\n    iframe = null,\n    selectClass = \"highlight\",\n    containerClass = \"tribute-container\",\n    itemClass = \"\",\n    trigger = \"@\",\n    autocompleteMode = false,\n    selectTemplate = null,\n    menuItemTemplate = null,\n    lookup = \"key\",\n    fillAttr = \"value\",\n    collection = null,\n    menuContainer = null,\n    noMatchTemplate = null,\n    requireLeadingSpace = true,\n    allowSpaces = false,\n    replaceTextSuffix = null,\n    positionMenu = true,\n    spaceSelectsMatch = false,\n    searchOpts = {},\n    menuItemLimit = null,\n    menuShowMinLength = 0\n  }) {\n    this.autocompleteMode = autocompleteMode;\n    this.menuSelected = 0;\n    this.current = {};\n    this.inputEvent = false;\n    this.isActive = false;\n    this.menuContainer = menuContainer;\n    this.allowSpaces = allowSpaces;\n    this.replaceTextSuffix = replaceTextSuffix;\n    this.positionMenu = positionMenu;\n    this.hasTrailingSpace = false;\n    this.spaceSelectsMatch = spaceSelectsMatch;\n\n    if (this.autocompleteMode) {\n      trigger = \"\";\n      allowSpaces = false;\n    }\n\n    if (values) {\n      this.collection = [\n        {\n          // symbol that starts the lookup\n          trigger: trigger,\n\n          // is it wrapped in an iframe\n          iframe: iframe,\n\n          // class applied to selected item\n          selectClass: selectClass,\n\n          // class applied to the Container\n          containerClass: containerClass,\n\n          // class applied to each item\n          itemClass: itemClass,\n\n          // function called on select that retuns the content to insert\n          selectTemplate: (\n            selectTemplate || Tribute.defaultSelectTemplate\n          ).bind(this),\n\n          // function called that returns content for an item\n          menuItemTemplate: (\n            menuItemTemplate || Tribute.defaultMenuItemTemplate\n          ).bind(this),\n\n          // function called when menu is empty, disables hiding of menu.\n          noMatchTemplate: (t => {\n            if (typeof t === \"string\") {\n              if (t.trim() === \"\") return null;\n              return t;\n            }\n            if (typeof t === \"function\") {\n              return t.bind(this);\n            }\n\n            return (\n              noMatchTemplate ||\n              function() {\n                return \"<li>No Match Found!</li>\";\n              }.bind(this)\n            );\n          })(noMatchTemplate),\n\n          // column to search against in the object\n          lookup: lookup,\n\n          // column that contains the content to insert by default\n          fillAttr: fillAttr,\n\n          // array of objects or a function returning an array of objects\n          values: values,\n\n          requireLeadingSpace: requireLeadingSpace,\n\n          searchOpts: searchOpts,\n\n          menuItemLimit: menuItemLimit,\n\n          menuShowMinLength: menuShowMinLength\n        }\n      ];\n    } else if (collection) {\n      if (this.autocompleteMode)\n        console.warn(\n          \"Tribute in autocomplete mode does not work for collections\"\n        );\n      this.collection = collection.map(item => {\n        return {\n          trigger: item.trigger || trigger,\n          iframe: item.iframe || iframe,\n          selectClass: item.selectClass || selectClass,\n          containerClass: item.containerClass || containerClass,\n          itemClass: item.itemClass || itemClass,\n          selectTemplate: (\n            item.selectTemplate || Tribute.defaultSelectTemplate\n          ).bind(this),\n          menuItemTemplate: (\n            item.menuItemTemplate || Tribute.defaultMenuItemTemplate\n          ).bind(this),\n          // function called when menu is empty, disables hiding of menu.\n          noMatchTemplate: (t => {\n            if (typeof t === \"string\") {\n              if (t.trim() === \"\") return null;\n              return t;\n            }\n            if (typeof t === \"function\") {\n              return t.bind(this);\n            }\n\n            return (\n              noMatchTemplate ||\n              function() {\n                return \"<li>No Match Found!</li>\";\n              }.bind(this)\n            );\n          })(noMatchTemplate),\n          lookup: item.lookup || lookup,\n          fillAttr: item.fillAttr || fillAttr,\n          values: item.values,\n          requireLeadingSpace: item.requireLeadingSpace,\n          searchOpts: item.searchOpts || searchOpts,\n          menuItemLimit: item.menuItemLimit || menuItemLimit,\n          menuShowMinLength: item.menuShowMinLength || menuShowMinLength\n        };\n      });\n    } else {\n      throw new Error(\"[Tribute] No collection specified.\");\n    }\n\n    new TributeRange(this);\n    new TributeEvents(this);\n    new TributeMenuEvents(this);\n    new TributeSearch(this);\n  }\n\n  get isActive() {\n    return this._isActive;\n  }\n\n  set isActive(val) {\n    if (this._isActive != val) {\n      this._isActive = val;\n      if (this.current.element) {\n        let noMatchEvent = new CustomEvent(`tribute-active-${val}`);\n        this.current.element.dispatchEvent(noMatchEvent);\n      }\n    }\n  }\n\n  static defaultSelectTemplate(item) {\n    if (typeof item === \"undefined\")\n      return `${this.current.collection.trigger}${this.current.mentionText}`;\n    if (this.range.isContentEditable(this.current.element)) {\n      return (\n        '<span class=\"tribute-mention\">' +\n        (this.current.collection.trigger +\n          item.original[this.current.collection.fillAttr]) +\n        \"</span>\"\n      );\n    }\n\n    return (\n      this.current.collection.trigger +\n      item.original[this.current.collection.fillAttr]\n    );\n  }\n\n  static defaultMenuItemTemplate(matchItem) {\n    return matchItem.string;\n  }\n\n  static inputTypes() {\n    return [\"TEXTAREA\", \"INPUT\"];\n  }\n\n  triggers() {\n    return this.collection.map(config => {\n      return config.trigger;\n    });\n  }\n\n  attach(el) {\n    if (!el) {\n      throw new Error(\"[Tribute] Must pass in a DOM node or NodeList.\");\n    }\n\n    // Check if it is a jQuery collection\n    if (typeof jQuery !== \"undefined\" && el instanceof jQuery) {\n      el = el.get();\n    }\n\n    // Is el an Array/Array-like object?\n    if (\n      el.constructor === NodeList ||\n      el.constructor === HTMLCollection ||\n      el.constructor === Array\n    ) {\n      let length = el.length;\n      for (var i = 0; i < length; ++i) {\n        this._attach(el[i]);\n      }\n    } else {\n      this._attach(el);\n    }\n  }\n\n  _attach(el) {\n    if (el.hasAttribute(\"data-tribute\")) {\n      console.warn(\"Tribute was already bound to \" + el.nodeName);\n    }\n\n    this.ensureEditable(el);\n    this.events.bind(el);\n    el.setAttribute(\"data-tribute\", true);\n  }\n\n  ensureEditable(element) {\n    if (Tribute.inputTypes().indexOf(element.nodeName) === -1) {\n      if (element.contentEditable) {\n        element.contentEditable = true;\n      } else {\n        throw new Error(\"[Tribute] Cannot bind to \" + element.nodeName);\n      }\n    }\n  }\n\n  createMenu(containerClass) {\n    let wrapper = this.range.getDocument().createElement(\"div\"),\n      ul = this.range.getDocument().createElement(\"ul\");\n    wrapper.className = containerClass;\n    wrapper.appendChild(ul);\n\n    if (this.menuContainer) {\n      return this.menuContainer.appendChild(wrapper);\n    }\n\n    return this.range.getDocument().body.appendChild(wrapper);\n  }\n\n  showMenuFor(element, scrollTo) {\n    // Only proceed if menu isn't already shown for the current element & mentionText\n    if (\n      this.isActive &&\n      this.current.element === element &&\n      this.current.mentionText === this.currentMentionTextSnapshot\n    ) {\n      return;\n    }\n    this.currentMentionTextSnapshot = this.current.mentionText;\n\n    // create the menu if it doesn't exist.\n    if (!this.menu) {\n      this.menu = this.createMenu(this.current.collection.containerClass);\n      element.tributeMenu = this.menu;\n      this.menuEvents.bind(this.menu);\n    }\n\n    this.isActive = true;\n    this.menuSelected = 0;\n\n    if (!this.current.mentionText) {\n      this.current.mentionText = \"\";\n    }\n\n    const processValues = values => {\n      // Tribute may not be active any more by the time the value callback returns\n      if (!this.isActive) {\n        return;\n      }\n\n      let items = this.search.filter(this.current.mentionText, values, {\n        pre: this.current.collection.searchOpts.pre || \"<span>\",\n        post: this.current.collection.searchOpts.post || \"</span>\",\n        skip: this.current.collection.searchOpts.skip,\n        extract: el => {\n          if (typeof this.current.collection.lookup === \"string\") {\n            return el[this.current.collection.lookup];\n          } else if (typeof this.current.collection.lookup === \"function\") {\n            return this.current.collection.lookup(el, this.current.mentionText);\n          } else {\n            throw new Error(\n              \"Invalid lookup attribute, lookup must be string or function.\"\n            );\n          }\n        }\n      });\n\n      if (this.current.collection.menuItemLimit) {\n        items = items.slice(0, this.current.collection.menuItemLimit);\n      }\n\n      this.current.filteredItems = items;\n\n      let ul = this.menu.querySelector(\"ul\");\n\n      this.range.positionMenuAtCaret(scrollTo);\n\n      if (!items.length) {\n        let noMatchEvent = new CustomEvent(\"tribute-no-match\", {\n          detail: this.menu\n        });\n        this.current.element.dispatchEvent(noMatchEvent);\n        if (\n          (typeof this.current.collection.noMatchTemplate === \"function\" &&\n            !this.current.collection.noMatchTemplate()) ||\n          !this.current.collection.noMatchTemplate\n        ) {\n          this.hideMenu();\n        } else {\n          typeof this.current.collection.noMatchTemplate === \"function\"\n            ? (ul.innerHTML = this.current.collection.noMatchTemplate())\n            : (ul.innerHTML = this.current.collection.noMatchTemplate);\n        }\n\n        return;\n      }\n\n      ul.innerHTML = \"\";\n      let fragment = this.range.getDocument().createDocumentFragment();\n\n      items.forEach((item, index) => {\n        let li = this.range.getDocument().createElement(\"li\");\n        li.setAttribute(\"data-index\", index);\n        li.className = this.current.collection.itemClass;\n        li.addEventListener(\"mousemove\", e => {\n          let [li, index] = this._findLiTarget(e.target);\n          if (e.movementY !== 0) {\n            this.events.setActiveLi(index);\n          }\n        });\n        if (this.menuSelected === index) {\n          li.classList.add(this.current.collection.selectClass);\n        }\n        li.innerHTML = this.current.collection.menuItemTemplate(item);\n        fragment.appendChild(li);\n      });\n      ul.appendChild(fragment);\n    };\n\n    if (typeof this.current.collection.values === \"function\") {\n      this.current.collection.values(this.current.mentionText, processValues);\n    } else {\n      processValues(this.current.collection.values);\n    }\n  }\n\n  _findLiTarget(el) {\n    if (!el) return [];\n    const index = el.getAttribute(\"data-index\");\n    return !index ? this._findLiTarget(el.parentNode) : [el, index];\n  }\n\n  showMenuForCollection(element, collectionIndex) {\n    if (element !== document.activeElement) {\n      this.placeCaretAtEnd(element);\n    }\n\n    this.current.collection = this.collection[collectionIndex || 0];\n    this.current.externalTrigger = true;\n    this.current.element = element;\n\n    if (element.isContentEditable)\n      this.insertTextAtCursor(this.current.collection.trigger);\n    else this.insertAtCaret(element, this.current.collection.trigger);\n\n    this.showMenuFor(element);\n  }\n\n  // TODO: make sure this works for inputs/textareas\n  placeCaretAtEnd(el) {\n    el.focus();\n    if (\n      typeof window.getSelection != \"undefined\" &&\n      typeof document.createRange != \"undefined\"\n    ) {\n      var range = document.createRange();\n      range.selectNodeContents(el);\n      range.collapse(false);\n      var sel = window.getSelection();\n      sel.removeAllRanges();\n      sel.addRange(range);\n    } else if (typeof document.body.createTextRange != \"undefined\") {\n      var textRange = document.body.createTextRange();\n      textRange.moveToElementText(el);\n      textRange.collapse(false);\n      textRange.select();\n    }\n  }\n\n  // for contenteditable\n  insertTextAtCursor(text) {\n    var sel, range, html;\n    sel = window.getSelection();\n    range = sel.getRangeAt(0);\n    range.deleteContents();\n    var textNode = document.createTextNode(text);\n    range.insertNode(textNode);\n    range.selectNodeContents(textNode);\n    range.collapse(false);\n    sel.removeAllRanges();\n    sel.addRange(range);\n  }\n\n  // for regular inputs\n  insertAtCaret(textarea, text) {\n    var scrollPos = textarea.scrollTop;\n    var caretPos = textarea.selectionStart;\n\n    var front = textarea.value.substring(0, caretPos);\n    var back = textarea.value.substring(\n      textarea.selectionEnd,\n      textarea.value.length\n    );\n    textarea.value = front + text + back;\n    caretPos = caretPos + text.length;\n    textarea.selectionStart = caretPos;\n    textarea.selectionEnd = caretPos;\n    textarea.focus();\n    textarea.scrollTop = scrollPos;\n  }\n\n  hideMenu() {\n    if (this.menu) {\n      this.menu.style.cssText = \"display: none;\";\n      this.isActive = false;\n      this.menuSelected = 0;\n      this.current = {};\n    }\n  }\n\n  selectItemAtIndex(index, originalEvent) {\n    index = parseInt(index);\n    if (typeof index !== \"number\" || isNaN(index)) return;\n    let item = this.current.filteredItems[index];\n    let content = this.current.collection.selectTemplate(item);\n    if (content !== null) this.replaceText(content, originalEvent, item);\n  }\n\n  replaceText(content, originalEvent, item) {\n    this.range.replaceTriggerText(content, true, true, originalEvent, item);\n  }\n\n  _append(collection, newValues, replace) {\n    if (typeof collection.values === \"function\") {\n      throw new Error(\"Unable to append to values, as it is a function.\");\n    } else if (!replace) {\n      collection.values = collection.values.concat(newValues);\n    } else {\n      collection.values = newValues;\n    }\n  }\n\n  append(collectionIndex, newValues, replace) {\n    let index = parseInt(collectionIndex);\n    if (typeof index !== \"number\")\n      throw new Error(\"please provide an index for the collection to update.\");\n\n    let collection = this.collection[index];\n\n    this._append(collection, newValues, replace);\n  }\n\n  appendCurrent(newValues, replace) {\n    if (this.isActive) {\n      this._append(this.current.collection, newValues, replace);\n    } else {\n      throw new Error(\n        \"No active state. Please use append instead and pass an index.\"\n      );\n    }\n  }\n\n  detach(el) {\n    if (!el) {\n      throw new Error(\"[Tribute] Must pass in a DOM node or NodeList.\");\n    }\n\n    // Check if it is a jQuery collection\n    if (typeof jQuery !== \"undefined\" && el instanceof jQuery) {\n      el = el.get();\n    }\n\n    // Is el an Array/Array-like object?\n    if (\n      el.constructor === NodeList ||\n      el.constructor === HTMLCollection ||\n      el.constructor === Array\n    ) {\n      let length = el.length;\n      for (var i = 0; i < length; ++i) {\n        this._detach(el[i]);\n      }\n    } else {\n      this._detach(el);\n    }\n  }\n\n  _detach(el) {\n    this.events.unbind(el);\n    if (el.tributeMenu) {\n      this.menuEvents.unbind(el.tributeMenu);\n    }\n\n    setTimeout(() => {\n      el.removeAttribute(\"data-tribute\");\n      this.isActive = false;\n      if (el.tributeMenu) {\n        el.tributeMenu.remove();\n      }\n    });\n  }\n}\n\nexport default Tribute;\n"]},"metadata":{},"sourceType":"script"}